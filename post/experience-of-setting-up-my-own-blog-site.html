<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2020-03-09 Mon 22:24 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>记我的博客折腾经历</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Kinney Zhang">

<link rel="shortcut icon" href="/static/img/favicon.ico"/>
<link rel="bookmark" href="/static/img/favicon.ico" type="image/x-icon"/>
<link id="pagestyle" rel="stylesheet" type="text/css" href="/static/light.css"/>
<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-149578968-1', 'auto');ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
</head>
<body>

<div id="org-div-header">
<div class="toptitle">
<a id="logo" href="/index.html">戈楷旎</a>
<p class="description">happy hacking emacs!</p>
</div>
<div class="topnav">
<a href="/index.html">首页</a>&nbsp;&nbsp;
<a href="/archive.html">归档</a>&nbsp;&nbsp;
<a href="/category.html">分类</a>&nbsp;&nbsp;
<a href="/about.html">关于</a>&nbsp;&nbsp;
<a href="/message.html">留言</a>&nbsp;&nbsp;
</div>
</div><div id="content">
<header>
<h1 class="title">记我的博客折腾经历</h1>
</header><div class="post-info">
<p>「 分类:博客 / 日期:2019-11-26 / 字数:1160 」</p>
</div>

<p>
我从2019年暑假初次学着搭建自己的blog网站。经历了从动态网站到静态网站，从markdown到org-mode。
</p>

<p>
第一版使用 <b>Django+mysql</b> 。自己从零开始查资料、写代码，最终折腾的像那么回事了。使用Django的优势很明显：动态网站拓展性高，后台管理系统，复习和学习了很多Django建站的知识。但缺点是需要和数据库打交道，并且在hack时经常会出现数据库迁移和服务器部署方面的问题。这可没少让我烦神。
</p>

<p>
第二版使用的是 <b>jekyll+github page</b> 。静态网站和动态网站比最大的优势就是不需要和数据库接触，只需维护每个markdown文档。Github page也免去了服务器部署的麻烦。Jekyll有丰富的主题可以选择，很轻松便可搭建漂亮的网站。但是没有让我满意的主题。之后又尝试了其他静态博客，如 <b>Hugo</b>, <b>Hexo</b> 等，同样是主题的问题。
</p>

<p>
第三版 <b>结合orgmode和静态blog</b> 。使用静态博客，意味着需要学习markdown，因为绝大多数的静态blog都只支持markdown渲染。Markdown自然很强大，但是作为emacser，我还是更喜欢<a href="https://orgmode.org/org.html">org mode</a>。于是便折腾了<a href="https://blog.geekinney.com/post/using-org-to-blog-with-jekyll.html">使用org-mode撰写Jekyll blog</a>。问题是，这种方法太不优雅！
</p>

<p>
第四版尝试 <b>完全基于org-mode</b> 的blog系统。melpa上有很多类似的package，比较著名的有org-page，org2web等。这些我都折腾了，不满意。原因要么是主题不好看，要么是流程太复杂。
</p>

<p>
经过了这四个阶段的折腾，我开始思考自己究竟需要什么样子的博客系统？结果总结为如下几点：
</p>
<ul class="org-ul">
<li>白色系，主题简洁耐看。这是我不喜欢很多静态博客定制主题的原因。它们虽然一眼看上去都很漂亮，但是不耐看。我认为耐看的主题是简洁但功能强大的，给人一种“麻雀虽小，五脏俱全”的感觉。</li>
<li>博客的受众主要是自己。除了一些技术文章，我的博客记录地更多是自己的思考与折腾经历。既然不为营销宣传，不为浏览量，自然也不需要做rss，SEO这些。</li>
<li>不设评论系统。之前在评论系统的选择和搭建上我也花了不少精力，尝试过 Qisqus、Gitalks、Livere等。Disqus需要科学上网，Gitalks仅限Github账号登陆，Livere浏览器兼容做的不好。目前我还没有找到一款完美的评论系统。于是干脆放弃评论系统，有问题邮件联系。这样也避免了没有意义的评论。</li>
<li>流程可控，可拓展。emacs是我最喜爱的生产力工具，将blog撰写和发布的所有流程放在emacs，我很放心。并且elisp的可拓展性是毋庸置疑的。</li>
</ul>

<p>
最终，我决定自己从零开始使用org-mode内置的功能搭建blog。静态博客网站的本质就是一个 <code>index.html</code> 加上一堆 <code>&lt;blog_post_name&gt;.html</code> 。如果想让网站漂亮一点，再加上一个 <code>style.css</code> 文件。至于其余的功能，如RSS，SEO，标签，评论等本质也就是对html进行一些添加、修改和处理。我暂时不需要这些功能，后面可根据需求添加。
</p>

<p>
OrgMode的 <code>org-publish</code> 原生支持批量org文件导出为HTML和添加导出样式，这使得基于org-mode搭建博客成为可能。最终的折腾效果见<a href="https://blog.geekinney.com">https://blog.geekinney.com</a>。
</p>

<p>
更新：
</p>
<ul class="org-ul">
<li>20191204:增加disqus评论系统，需要科学上网才能使用。</li>
<li>20191215:增加google analysis，分析网站数据流量。</li>
<li>20200103:实现对disqus的lazyload，提高网站访问速度。</li>
<li>20200121:使用valine代替disqus，国内可访问。</li>
<li>20200210:本地加载highlight.min.js和Valine.min.js并将js放在页面底部，大大提高网站访问速度。</li>
<li>20200211:SEO优化，增加sitemap和robots.txt。</li>
<li>20200213:增加博客暗色主题，使用localStorage存储状态，点击按钮切换主题。</li>
<li>20200214:使用elisp自动生成博文开头辅助信息（日期，字数，分类）。</li>
<li>20200219:使用elisp自动生成blog首页，显示摘要。</li>
<li>20200224:将nav page页面与文章页面分开，nav page不设评论。</li>
<li>20200228:修改博客整体样式。</li>
<li>20200302:添加 <code>CC BY-NC-SA 4.0</code> 共享协议。</li>
</ul>
</div>
<div id="postamble" class="status">

<script src="/static/jQuery.min.js"></script>
<script src="/static/Valine.min.js"></script>

<div id="vcomments"></div>
<script>
new Valine({
el: '#vcomments',
appId: 'jVMbXK6tJDtPCzR3Mp0V5L6V-gzGzoHsz',
appKey: 'SX4oRFXp8K7KgeGhKTTDy3VI',
visitor: true,
notify: true,
verify: false,
avatar: 'identicon',
placeholder: '留下你的评论吧～'
})
</script>

<p>Licensed under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"/></a></p>
<p class="author">Author: Kinney Zhang (<a href="mailto:kinneyzhang666@gmail.com">kinneyzhang666@gmail.com</a>)</p>
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 26.3 (<a href="https://orgmode.org">Org</a> mode 9.1.9)</p>


<script>
$(document).ready(function(){
var theme = sessionStorage.getItem("theme");
if(theme=="dark"){
document.getElementById("pagestyle").href="/static/dark.css";
}else if(theme=="light"){
document.getElementById("pagestyle").href="/static/light.css";
}else{
sessionStorage.setItem("theme","light");
}});

function switchTheme(){
if(sessionStorage.getItem("flag")=="false"){
document.getElementById("pagestyle").href="/static/light.css";
sessionStorage.setItem("theme","light");
sessionStorage.setItem("flag", "true");
}else{
document.getElementById("pagestyle").href="/static/dark.css";
sessionStorage.setItem("theme","dark");
sessionStorage.setItem("flag", "false");
}};
</script>
</div>
</body>
</html>
