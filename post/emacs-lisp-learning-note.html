<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2019-12-18 Wed 15:08 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>elisp学习笔记</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Kinney Zhang">
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-149578968-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

<link rel="stylesheet" type="text/css" href="https://blog.geekinney.com/static/ostyle.css"/>
<link rel="stylesheet" type="text/css" href="https://blog.geekinney.com/static/ostyle2.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
<script>var hlf=function(){Array.prototype.forEach.call(document.querySelectorAll("pre.src"),function(t){var e;e=t.getAttribute("class").toLowerCase(),e=e.replace(/src-(w+)/,"src-$1 $1"),console.log(e),t.setAttribute("class",e),hljs.highlightBlock(t)})};addEventListener("DOMContentLoaded",hlf);</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/googlecode.min.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>

<div id="org-div-header">
<div class="toptitle">
<span href="/post/index.html">Geekinney Blog</span>
<!--Google站内搜索开始--> <form method=get action="http://www.google.com/search"> <input type=text name=q> <input type=submit name=btnG value="Google 搜索"> <input type=hidden name=ie value=GB2312> <input type=hidden name=oe value=GB2312> <input type=hidden name=hl value=zh-CN> <input type=hidden name=domains value="blog.geekinney.com"> <input type=hidden name=sitesearch value="blog.geekinney.com"> </form> <!--Google站内搜索结束-->
</div>
<div class="topnav">
<a href="/post/index.html"> Home </a>&nbsp;|&nbsp;
<a href="/post/bookmark.html"> 链接收藏 </a>  &nbsp;|&nbsp;
<a href="/post/videos-collection.html"> 视频收藏 </a>  &nbsp;|&nbsp;
<a href="https://github.com/Kinneyzhang"> Github </a>&nbsp;|&nbsp;
</div>
</div>
<div id="content">
<header>
<h1 class="title">elisp学习笔记</h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org97cac73">1. Elisp</a>
<ul>
<li><a href="#org6bee9ec">1.1. 概览</a>
<ul>
<li><a href="#org5ead4e7">1.1.1. 运行emacs-lisp的几种方式</a></li>
<li><a href="#org3831871">1.1.2. 创建命令（interactive函数）</a></li>
<li><a href="#org8356777">1.1.3. emacs探索</a></li>
</ul>
</li>
<li><a href="#org390ee6f">1.2. elisp编程的基本设置</a></li>
<li><a href="#org9f02f4c">1.3. 基本运算</a>
<ul>
<li><a href="#org21d1518">1.3.1. 算术</a></li>
<li><a href="#org448a821">1.3.2. 比较</a></li>
<li><a href="#org6ec759c">1.3.3. 列表</a></li>
</ul>
</li>
<li><a href="#org6df50dc">1.4. 类型判断和Literals</a>
<ul>
<li><a href="#orgd9a4e77">1.4.1. Emacs Literals</a></li>
<li><a href="#org49b97e6">1.4.2. 基本类型判断</a></li>
<li><a href="#org9d6df35">1.4.3. 获取对象类型</a></li>
</ul>
</li>
<li><a href="#org9c32513">1.5. 变量定义</a></li>
<li><a href="#org29475cd">1.6. 函数定义</a>
<ul>
<li><a href="#orge1bb15f">1.6.1. 定义简单函数</a></li>
<li><a href="#org9415924">1.6.2. 匿名函数/Lambda函数</a></li>
<li><a href="#org29bee04">1.6.3. 函数作为参数</a></li>
<li><a href="#org1589ba1">1.6.4. 多参函数</a></li>
<li><a href="#orgc0da1d1">1.6.5. 可选参数函数</a></li>
<li><a href="#org33246aa">1.6.6. 含属性列表参数函数</a></li>
<li><a href="#orge95e192">1.6.7. Closures</a></li>
</ul>
</li>
<li><a href="#org2f1427d">1.7. 列表操作</a></li>
<li><a href="#org08c3ecb">1.8. 关联列表和属性列表</a>
<ul>
<li><a href="#orgb16e7cb">1.8.1. 概览</a></li>
<li><a href="#org5723aa3">1.8.2. 关联列表/Alist</a></li>
<li><a href="#orgfa6bfa7">1.8.3. 属性列表</a></li>
<li><a href="#org8cd25be">1.8.4. 转换Alist成Plist和vice-versa</a></li>
</ul>
</li>
<li><a href="#orgcc203a8">1.9. 字符串</a></li>
<li><a href="#orgb594a95">1.10. 符号</a></li>
<li><a href="#org8aa51e9">1.11. 类型转换</a></li>
<li><a href="#org5ef1f2f">1.12. 求值</a></li>
<li><a href="#orgbe4d00c">1.13. Defalias</a></li>
<li><a href="#org207463a">1.14. 控制结构</a>
<ul>
<li><a href="#org6bc86de">1.14.1. Conditional Statement</a></li>
<li><a href="#org5779000">1.14.2. Cond - Case Switch</a></li>
<li><a href="#org4c51d00">1.14.3. CL-Case - Case Switch</a></li>
<li><a href="#org2951eee">1.14.4. 循环</a></li>
<li><a href="#orgb64cb4d">1.14.5. 函数式编程</a></li>
</ul>
</li>
<li><a href="#org4701d2b">1.15. Structures</a></li>
</ul>
</li>
<li><a href="#org591c852">2. 宏和元编程</a>
<ul>
<li><a href="#org778998a">2.1. Quasi-quote</a></li>
<li><a href="#org0618ecb">2.2. 宏</a></li>
</ul>
</li>
<li><a href="#orgcb3084d">3. Emacs API</a>
<ul>
<li><a href="#orga6240ae">3.1. Emacs术语</a></li>
<li><a href="#org6f211f4">3.2. Emacs API</a></li>
<li><a href="#org08dcf8f">3.3. Buffers</a>
<ul>
<li><a href="#org91e7131">3.3.1. Buffer Attributes</a></li>
<li><a href="#orgc690698">3.3.2. Buffer Mode</a></li>
<li><a href="#org652f332">3.3.3. Get Buffer Contents / Selection / Line</a></li>
<li><a href="#org8162fcc">3.3.4. Search and Replace in the entire Buffer</a></li>
</ul>
</li>
<li><a href="#orgeae5ae5">3.4. Point, Region, Line and Buffer</a>
<ul>
<li><a href="#orge228e97">3.4.1. Point</a></li>
<li><a href="#org9710670">3.4.2. Thing at Point API</a></li>
</ul>
</li>
<li><a href="#org48653a0">3.5. Message / Output</a></li>
<li><a href="#orge4e589f">3.6. Files, Directories and Path</a>
<ul>
<li><a href="#org96f0e0a">3.6.1. Basic Functions</a></li>
<li><a href="#org6d611f9">3.6.2. File Name Components</a></li>
<li><a href="#org54df10a">3.6.3. Read / Write file to a string</a></li>
</ul>
</li>
<li><a href="#org659172f">3.7. Window Functions</a>
<ul>
<li><a href="#org16c7452">3.7.1. Basic Window Functions</a></li>
<li><a href="#org80fe4e8">3.7.2. Manipulate Buffer in Another Window</a></li>
<li><a href="#orge84f0c6">3.7.3. Window Configuration</a></li>
</ul>
</li>
<li><a href="#org7435f8c">3.8. OS Interface</a>
<ul>
<li><a href="#org808e0ee">3.8.1. Find the current operating system</a></li>
<li><a href="#org46ba418">3.8.2. Date and Time</a></li>
<li><a href="#org9cd0123">3.8.3. Call External Commands or Apps</a></li>
<li><a href="#org75ced38">3.8.4. Environment Variables</a></li>
<li><a href="#org04ff8fd">3.8.5. Process Management</a></li>
</ul>
</li>
<li><a href="#orga6d65d2">3.9. Interfaces</a>
<ul>
<li><a href="#org137613f">3.9.1. Creating Quick Access Menu</a></li>
<li><a href="#org63903b1">3.9.2. Add Icons to toolbar</a></li>
</ul>
</li>
<li><a href="#orgfcda48f">3.10. Timer</a>
<ul>
<li><a href="#orge9dbdb4">3.10.1. run-with-timer</a></li>
</ul>
</li>
<li><a href="#orga64d6d2">3.11. Emacs Modes</a>
<ul>
<li><a href="#org367555f">3.11.1. Mode Association with Files</a></li>
<li><a href="#org8632525">3.11.2. Lisp Routines to introspect modes??</a></li>
<li><a href="#org042ee2b">3.11.3. Mode Specific Key Bindings</a></li>
</ul>
</li>
<li><a href="#org880db61">3.12. Special Variables</a></li>
<li><a href="#org37d33f5">3.13. Network</a></li>
</ul>
</li>
<li><a href="#org6679bbc">4. 正则表达式</a>
<ul>
<li><a href="#org1ac748d">4.1. Emacs Regex</a></li>
<li><a href="#org8e5a72b">4.2. Regex Commands</a></li>
<li><a href="#org16eac3b">4.3. Regex Functions</a>
<ul>
<li><a href="#orga39600c">4.3.1. match-string</a></li>
<li><a href="#orgc8e111b">4.3.2. match-end</a></li>
<li><a href="#orgc43f2b0">4.3.3. match-beginning</a></li>
<li><a href="#org0240f2b">4.3.4. re-search</a></li>
<li><a href="#orgbab5f52">4.3.5. re-search-forward</a></li>
<li><a href="#orgbd9d357">4.3.6. replace-string-in-regexp</a></li>
<li><a href="#org99b06c9">4.3.7. replace-string</a></li>
</ul>
</li>
<li><a href="#org4d376bc">4.4. Build regex interactively</a></li>
<li><a href="#org93dca40">4.5. Emacs Regex rx-notation</a></li>
</ul>
</li>
<li><a href="#orgd283a93">5. Color Scheme</a></li>
<li><a href="#orgcc79084">6. Key Bindings</a></li>
</ul>
</div>
</nav>
<p>
原文参考： <a href="http://caiorss.github.io/Emacs-Elisp-Programming/Elisp_Programming.html">Elisp Programming</a>
</p>
<div id="outline-container-org97cac73" class="outline-2">
<h2 id="org97cac73"><span class="section-number-2">1</span> Elisp</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org6bee9ec" class="outline-3">
<h3 id="org6bee9ec"><span class="section-number-3">1.1</span> 概览</h3>
<div class="outline-text-3" id="text-1-1">
</div>
<div id="outline-container-org5ead4e7" class="outline-4">
<h4 id="org5ead4e7"><span class="section-number-4">1.1.1</span> 运行emacs-lisp的几种方式</h4>
<div class="outline-text-4" id="text-1-1-1">
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">key</th>
<th scope="col" class="org-left">command</th>
<th scope="col" class="org-left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>C-x C-e</code></td>
<td class="org-left"><code>eval-last-sexp</code></td>
<td class="org-left">在S表达式结尾运行，在minibuffer显示结果</td>
</tr>

<tr>
<td class="org-left"><code>C-j</code></td>
<td class="org-left"><code>eval-print-last-sexp</code></td>
<td class="org-left">在S表达式结尾运行，打印运行结果</td>
</tr>

<tr>
<td class="org-left"><code>M-:</code></td>
<td class="org-left"><code>eval-expression</code></td>
<td class="org-left">在minibuffer输入命令并执行</td>
</tr>

<tr>
<td class="org-left"><code>M-x ielm</code></td>
<td class="org-left"><code>ielm</code></td>
<td class="org-left">使用IELM解释器运行代码</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org3831871" class="outline-4">
<h4 id="org3831871"><span class="section-number-4">1.1.2</span> 创建命令（interactive函数）</h4>
<div class="outline-text-4" id="text-1-1-2">
<div class="col-auto">
<pre><code class="emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">example</span>
(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">buffer/insert-filename</span> ()
  <span style="color: #8b2252;">"Insert file path of current buffer at current point"</span>
  (<span style="color: #a020f0;">interactive</span>)
  (insert (buffer-file-name (current-buffer))))
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org8356777" class="outline-4">
<h4 id="org8356777"><span class="section-number-4">1.1.3</span> emacs探索</h4>
<div class="outline-text-4" id="text-1-1-3">
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">key</th>
<th scope="col" class="org-left">command</th>
<th scope="col" class="org-left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>C-h k</code></td>
<td class="org-left"><code>describe-key</code></td>
<td class="org-left">运行命令后，继续按键，查看此时按键绑定的函数</td>
</tr>

<tr>
<td class="org-left"><code>C-h b</code></td>
<td class="org-left"><code>describe-bindings</code></td>
<td class="org-left">在*Help*界面搜索 <code>Major Mode Bindings:</code> 可以查看所有与当前major mode相关的按键。</td>
</tr>

<tr>
<td class="org-left"><code>C-h f</code></td>
<td class="org-left"><code>describe-function</code></td>
<td class="org-left">查看函数文档及详细代码</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org390ee6f" class="outline-3">
<h3 id="org390ee6f"><span class="section-number-3">1.2</span> elisp编程的基本设置</h3>
<div class="outline-text-3" id="text-1-2">
<p>
三个有用的pcakage:
</p>
<ul class="org-ul">
<li>rainbow-delimiters: 不同颜色区分不同层级的括号</li>
<li>paredit: 检查括号匹配</li>
<li>company: elisp代码补全</li>
</ul>
</div>
</div>

<div id="outline-container-org9f02f4c" class="outline-3">
<h3 id="org9f02f4c"><span class="section-number-3">1.3</span> 基本运算</h3>
<div class="outline-text-3" id="text-1-3">
</div>
<div id="outline-container-org21d1518" class="outline-4">
<h4 id="org21d1518"><span class="section-number-4">1.3.1</span> 算术</h4>
<div class="outline-text-4" id="text-1-3-1">
<pre class="example">
ELISP&gt; (+ 20 30)
50
ELISP&gt; (- 100 80)
20
ELISP&gt; (+ 1 2 3 4 5 6)
21
ELISP&gt; (* 1 2 3 4 5 6)
720
ELISP&gt; (/ 1 100)
0

ELISP&gt; (&gt; 10 1) ;; ?? 10 &gt; 1
t
ELISP&gt; (&lt; 2 8) ;; ?? 2 &lt; 8
t
ELISP&gt; (&lt; 8 2) ;; ?? 8 &lt; 2
nil

ELISP&gt; (= 2 2)
t
ELISP&gt; (= 2 4)
nil

ELISP&gt; (/= 2 2)
nil
ELISP&gt; (exp -1)
0.36787944117144233
ELISP&gt; (log 10)
2.302585092994046
ELISP&gt; (sin pi)
1.2246467991473532e-16
ELISP&gt; (cos pi)
-1.0
ELISP&gt; (tan (/ pi 2))
1.633123935319537e+16
ELISP&gt;
</pre>
</div>
</div>

<div id="outline-container-org448a821" class="outline-4">
<h4 id="org448a821"><span class="section-number-4">1.3.2</span> 比较</h4>
<div class="outline-text-4" id="text-1-3-2">
<pre class="example">
;;;; Compare Numbers
ELISP&gt; (= 2 (+ 1 1))
t

;;; Compare Symbols and Numbers
ELISP&gt; (eq 1 1)
t
ELISP&gt; (eq 1 2)
nil
ELISP&gt;

ELISP&gt; (eq 'x 'x)
t
ELISP&gt;

;;; Compare Elements of a List
ELISP&gt; (equal (list 1 2 3 4) (list 1 2 3 4))
t

;;; Compare Strings
ELISP&gt; (string= "hello" "hello")
t
</pre>
</div>
</div>

<div id="outline-container-org6ec759c" class="outline-4">
<h4 id="org6ec759c"><span class="section-number-4">1.3.3</span> 列表</h4>
<div class="outline-text-4" id="text-1-3-3">
<pre class="example">
ELISP&gt; '(10 20 30 40)
(10 20 30 40)

ELISP&gt; '(10 203 40 "hello" () ("empty" 65))
(10 203 40 "hello" nil
    ("empty" 65))
</pre>
</div>
</div>
</div>

<div id="outline-container-org6df50dc" class="outline-3">
<h3 id="org6df50dc"><span class="section-number-3">1.4</span> 类型判断和Literals</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-orgd9a4e77" class="outline-4">
<h4 id="orgd9a4e77"><span class="section-number-4">1.4.1</span> Emacs Literals</h4>
<div class="outline-text-4" id="text-1-4-1">
<pre class="example">
;;; Numbers
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
ELISP&gt; 1e3
1000.0

;;; String
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
ELISP&gt; "Hello World Emacs Literals"
"Hello World Emacs Literals"
ELISP&gt;

;;; Symbol
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

ELISP&gt; 'this-a-symbol
this-a-symbol

ELISP&gt; 'vector-&gt;list
vector-&gt;list

ELISP&gt; 'symbol?
symbol\?
ELISP&gt;

;; Boolean t and nil
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
ELISP&gt; t
t
ELISP&gt; nil
nil
ELISP&gt;

 ;;; Everything that is not "nil" is true:
 ;;-----------------------------------------
ELISP&gt; (if t "It is true (not nil)" "It is false (it is nil)")
"It is true (not nil)"
ELISP&gt;
ELISP&gt; (if 100e3 "It is true (not nil)" "It is false (it is nil)")
"It is true (not nil)"
ELISP&gt; (if '(a b c d)  "It is true (not nil)" "It is false (it is nil)")
"It is true (not nil)"
ELISP&gt;

ELISP&gt; (if nil  "It is true (not nil)" "It is false (it is nil)")
"It is false (it is nil)"
ELISP&gt;

;;; Pair / Cons Cell
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
ELISP&gt; '(a . b)
(a . b)

ELISP&gt; '(a . 2999)
(a . 2999)

;;; List
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
ELISP&gt; '(1 2 3 (3 4) (5 6 (+ 3 4)) 10 'a 'b "hello" )
(1 2 3
   (3 4)
   (5 6
      (+ 3 4))
   10 'a 'b "hello")

ELISP&gt; '(+ 1 2 3 4 5)
(+ 1 2 3 4 5)

ELISP&gt; '(cos 10)
(cos 10)

;;; Vectors
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
ELISP&gt; [1 2 3 4 (+ 1 2 3 54)]
[1 2 3 4
   (+ 1 2 3 54)]
</pre>
</div>
</div>

<div id="outline-container-org49b97e6" class="outline-4">
<h4 id="org49b97e6"><span class="section-number-4">1.4.2</span> 基本类型判断</h4>
<div class="outline-text-4" id="text-1-4-2">
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Type</th>
<th scope="col" class="org-left">Predicate</th>
<th scope="col" class="org-left">Literal</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Nil</td>
<td class="org-left">null</td>
<td class="org-left">nil '()</td>
<td class="org-left">Test if argument is nil</td>
</tr>

<tr>
<td class="org-left">Numbers</td>
<td class="org-left">numberp</td>
<td class="org-left">100, 200e3</td>
<td class="org-left">Test if it is number.</td>
</tr>

<tr>
<td class="org-left">String</td>
<td class="org-left">stringp</td>
<td class="org-left">"hello"</td>
<td class="org-left">Test if it is string</td>
</tr>

<tr>
<td class="org-left">Symbol</td>
<td class="org-left">symbolp</td>
<td class="org-left">'sym :keyworkd</td>
<td class="org-left">Test if it is a symbol.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Atom</td>
<td class="org-left">atom</td>
<td class="org-left">'x "h" :key 200</td>
<td class="org-left">Everything that is not a list or pair is an atom.</td>
</tr>

<tr>
<td class="org-left">List</td>
<td class="org-left">listp</td>
<td class="org-left">'(1 2 x y)</td>
<td class="org-left">Test if it is a list</td>
</tr>

<tr>
<td class="org-left">Pair</td>
<td class="org-left">consp</td>
<td class="org-left">'(a . 200)</td>
<td class="org-left">Test if it is a pair (cons cell)</td>
</tr>

<tr>
<td class="org-left">Vector</td>
<td class="org-left">vectorp</td>
<td class="org-left">[1 200 'sym]</td>
<td class="org-left">Test if it is a vector</td>
</tr>
</tbody>
</table>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Object</th>
<th scope="col" class="org-left">Predicate</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Buffer</td>
<td class="org-left">bufferp</td>
</tr>

<tr>
<td class="org-left">Window</td>
<td class="org-left">windowp</td>
</tr>

<tr>
<td class="org-left">Frame</td>
<td class="org-left">framep</td>
</tr>

<tr>
<td class="org-left">Process</td>
<td class="org-left">processp</td>
</tr>
</tbody>
</table>

<pre class="example">
ELISP&gt; (null nil)
t
ELISP&gt;
ELISP&gt; (null '())
t

ELISP&gt; (null 10)
nil

ELISP&gt; (atom 10)
t
ELISP&gt; (atom '(a . b))
nil
ELISP&gt; (atom "hello world")
t
ELISP&gt;

ELISP&gt; (bufferp (current-buffer))
t
ELISP&gt; (bufferp (selected-window))
nil
ELISP&gt; (windowp (selected-window))
t
ELISP&gt;
</pre>
</div>
</div>

<div id="outline-container-org9d6df35" class="outline-4">
<h4 id="org9d6df35"><span class="section-number-4">1.4.3</span> 获取对象类型</h4>
<div class="outline-text-4" id="text-1-4-3">
<pre class="example">
ELISP&gt; (type-of (current-buffer))
buffer
ELISP&gt;
ELISP&gt; (type-of (selected-window))
window
ELISP&gt;

ELISP&gt; (equal 'buffer (type-of (current-buffer)))
t
ELISP&gt; (equal 'buffer (type-of (selected-window)))
nil
ELISP&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-org9c32513" class="outline-3">
<h3 id="org9c32513"><span class="section-number-3">1.5</span> 变量定义</h3>
<div class="outline-text-3" id="text-1-5">
<pre class="example">
;;; Constants
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

ELISP&gt; (defconst zsh-shell "/usr/bin/zsh")
zsh-shell

ELISP&gt; zsh-shell
"/usr/bin/zsh"
ELISP&gt;

;;; Define a variable
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;;;; Set is not used very much
;;
ELISP&gt; (set 'avar "hello world")
"hello world"

ELISP&gt; avar
"hello world"
ELISP&gt;

;;;;; The most used command for assignment is setq
;;
ELISP&gt; (setq x 10)
10

ELISP&gt; (setq avar "hello world")
"hello world"

ELISP&gt; x
10

ELISP&gt; avar
"hello world"
ELISP&gt;

ELISP&gt; (setq my-list '(10 20 30 40))
(10 20 30 40)

ELISP&gt; my-list
(10 20 30 40)

;;; Multiple Assignment
;;
ELISP&gt; (setq a 10 b 20 c "Emacs")
"Emacs"
ELISP&gt; a
10
ELISP&gt; b
20
ELISP&gt; c
"Emacs"
ELISP&gt;

;; Dynamic Scoping  (Local Variables)
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;
ELISP&gt; (let ((x 1) (y 10)) (+ (* 4 x) (* 5 y)) )
54
ELISP&gt; x
    ** Eval error **  Symbol's value as variable is void: x
ELISP&gt; y
    ** Eval error **  Symbol's value as variable is void: y
ELISP&gt;
</pre>
</div>
</div>
<div id="outline-container-org29475cd" class="outline-3">
<h3 id="org29475cd"><span class="section-number-3">1.6</span> 函数定义</h3>
<div class="outline-text-3" id="text-1-6">
</div>
<div id="outline-container-orge1bb15f" class="outline-4">
<h4 id="orge1bb15f"><span class="section-number-4">1.6.1</span> 定义简单函数</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
语法: (defun &lt;function name&gt; (&lt;parameters&gt;) (&lt;body&gt;))
</p>
<pre class="example">
ELISP&gt; (defun afunction (a b c) (+ a b c))
afunction

ELISP&gt; (afunction 10 20 30)
60

ELISP&gt; (defun myfun () (message "Hello Emacs"))
myfun
ELISP&gt; (myfun)
"Hello Emacs"
ELISP&gt;


ELISP&gt;
ELISP&gt; (defun signum (n)
     (cond ((&gt; n 0) 1 )
	   ((&lt; n 0) -1)
	   (0)))
signum
ELISP&gt; (signum 10)
1
ELISP&gt; (signum 0)
0
ELISP&gt; (signum -23)
-1
ELISP&gt;


ELISP&gt; (defun factorial (n)
     (if (= n 0)
	 1
	 (* n (factorial (- n 1)))))
factorial

ELISP&gt; (factorial 5)
120
ELISP
</pre>
</div>
</div>
<div id="outline-container-org9415924" class="outline-4">
<h4 id="org9415924"><span class="section-number-4">1.6.2</span> 匿名函数/Lambda函数</h4>
<div class="outline-text-4" id="text-1-6-2">
<p>
语法: (lambda (&lt;parameters&gt;) (&lt;body&gt;))
</p>
<pre class="example">
ELISP&gt; (lambda (x) (+ x 3))
(lambda
  (x)
  (+ x 3))

;;; Applying Lambda Functions
;;

ELISP&gt; ((lambda (x) (+ x 3)) 4)
7
ELISP&gt; (funcall (lambda (x) (+ x 3)) 4)
7
ELISP&gt;

;;; Storing Lambda Function in Variable
;;
;;

ELISP&gt; (defvar add3 (lambda (x) (+ x 3)))
add3


ELISP&gt; add3
(lambda
  (x)
  (+ x 3))

ELISP&gt; (funcall add3 10)
13

ELISP&gt; (add3 10)
    ** Eval error **  Symbol's function definition is void: add3

ELISP&gt; (funcall #'add3 10)
    ** Eval error **  Symbol's function definition is void: add3
ELISP&gt;

;;; Passing Lambda Function to functions
;;
ELISP&gt; (mapcar (lambda (x) (+ x 3))  '(1 2 3 4 5))
(4 5 6 7 8)
</pre>
</div>
</div>
<div id="outline-container-org29bee04" class="outline-4">
<h4 id="org29bee04"><span class="section-number-4">1.6.3</span> 函数作为参数</h4>
<div class="outline-text-4" id="text-1-6-3">
<p>
语法: (caller-function #'&lt;function-1&gt; #'&lt;function-1&gt; arg1 arg2 &#x2026;)
</p>

<p>
在函数内部，使用 <code>funcall</code> 调用函数作为参数
</p>

<pre class="example">
ELISP&gt; (mapcar log '(1 10 100 1000))
    ** Eval error **  Symbol's value as variable is void: log


ELISP&gt; (mapcar #'log10 '(1 10 100 1000))
(0.0 1.0 2.0 3.0)

(defun sum-fun (f1 f2 x)
  (+ (funcall f1 x) (funcall f2 x)))

ELISP&gt; (sum-fun #'log #'exp 3)
21.18414921185578
ELISP&gt;

ELISP&gt; (+ (log 3) (exp 3))
21.18414921185578
ELISP&gt;

ELISP&gt; (sum-fun (lambda (x) (* 3 x))
	(lambda (x) (* 4 x))
	5)
35
ELISP&gt;

ELISP&gt; (defun 1+ (x) (+ 1 x))
1+
ELISP&gt; (defun 3* (x) (* 3 x))
3*

ELISP&gt; (sum-fun #'1+  #'3* 4)
17
ELISP&gt;

ELISP&gt; (sum-fun #'1+  (lambda (x) (* 3 x)) 4)
17
ELISP&gt;
</pre>
</div>
</div>
<div id="outline-container-org1589ba1" class="outline-4">
<h4 id="org1589ba1"><span class="section-number-4">1.6.4</span> 多参函数</h4>
<div class="outline-text-4" id="text-1-6-4">
<pre class="example">
(defun sum (&amp;rest numbers)
  (apply #'+ numbers))

ELISP&gt; (sum 1 2 3 4 5 6)
21


ELISP&gt; (apply #'sum '(1 2 3 5 6))
17

ELISP&gt; (apply #'sum (list 1 2 3 5 (+ 6 5 2)))
24

ELISP&gt; (apply #'sum '())
0

ELISP&gt; (apply #'sum nil)
0

ELISP&gt; (sum nil)
    ** Eval error **  Wrong type argument: number-or-marker-p, ni

;;----------------------------------

(defun sum-prod (a &amp;rest xs)
  (* a (apply #'+ xs)))


ELISP&gt; (sum-prod 3 1 2 3 4 5)
45

ELISP&gt; (sum-prod 1 1 2 3 4 5)
15
</pre>
</div>
</div>
<div id="outline-container-orgc0da1d1" class="outline-4">
<h4 id="orgc0da1d1"><span class="section-number-4">1.6.5</span> 可选参数函数</h4>
<div class="outline-text-4" id="text-1-6-5">
<pre class="example">
(defun test-optional (a &amp;optional b)
  (list a b))

ELISP&gt; (test-optional 10 20)
(10 20)

ELISP&gt; (test-optional 10 )
(10 nil)

;--------------------------------;

(defun test-optional2 (a b &amp;optional b c d e)
  (list :a a :b b :c c :d d :e e))

ELISP&gt; (test-optional2 0 1 2 3 4 5 )
(:a 0 :b 2 :c 3 :d 4 :e 5)


ELISP&gt; (test-optional2 0 1 2 3 4  )
(:a 0 :b 2 :c 3 :d 4 :e nil)

ELISP&gt; (test-optional2 0 1 2 3   )
(:a 0 :b 2 :c 3 :d nil :e nil)

ELISP&gt; (test-optional2 0 1 2    )
(:a 0 :b 2 :c nil :d nil :e nil)

ELISP&gt; (test-optional2 0 1  )
(:a 0 :b nil :c nil :d nil :e nil)

ELISP&gt; (test-optional2 0 1)
(:a 0 :b nil :c nil :d nil :e nil)

;--------------------------------;

(defun test-optional-default-b (a &amp;optional b)
  (if b
      (list a b)
      (list a "b is null")))

ELISP&gt; (test-optional-default-b 1 2)
(1 2)

ELISP&gt; (test-optional-default-b 1)
(1 "b is null")

ELISP&gt; (test-optional-default-b 1 nil)
(1 "b is null")
</pre>
</div>
</div>
<div id="outline-container-org33246aa" class="outline-4">
<h4 id="org33246aa"><span class="section-number-4">1.6.6</span> 含属性列表参数函数</h4>
<div class="outline-text-4" id="text-1-6-6">
<pre class="example">
(defun make-shell-interface (&amp;rest params)
  "
  Create a shell interface.

  Possible parameters:

    :name      Name of shell
    :type      ['sh, 'bash, ...]
    :path      Path to program
    :buffer    Name of buffer

  "
  (let
       ((name   (plist-get params :name ))
	(type   (plist-get params :type))
	(path   (plist-get params :path))
	(buffer (plist-get params :buffer)))
    (list
     (cons 'name buffer)
     (cons 'type type)
     (cons 'path path)
     (cons 'buffer buffer))))


ELISP&gt; (make-shell-interface :name "pylaucher" :path "/usr/bin/python" :type 'sh :buffer "pyshell")
((name . "pyshell")
 (type . sh)
 (path . "/usr/bin/python")
 (buffer . "pyshell"))

ELISP&gt; (make-shell-interface :name "pylaucher" :path "/usr/bin/python" :type 'sh)
((name)
 (type . sh)
 (path . "/usr/bin/python")
 (buffer))

ELISP&gt; (make-shell-interface :name "pylaucher" :path "/usr/bin/python" :type 'bash)
((name)
 (type . bash)
 (path . "/usr/bin/python")
 (buffer))

ELISP&gt; (make-shell-interface :name "pylaucher" :path "/usr/bin/python")
((name)
 (type)
 (path . "/usr/bin/python")
 (buffer))

ELISP&gt; (make-shell-interface :name "pylaucher" )
((name)
 (type)
 (path)
 (buffer))

ELISP&gt; (make-shell-interface  )
((name)
 (type)
 (path)
 (buffer))

ELISP&gt; (make-shell-interface :buffer "pyshell"  :path "/usr/bin/python" :type 'sh :name "pylaucher")
((name . "pyshell")
 (type . sh)
 (path . "/usr/bin/python")
 (buffer . "pyshell"))
</pre>
</div>
</div>
<div id="outline-container-orge95e192" class="outline-4">
<h4 id="orge95e192"><span class="section-number-4">1.6.7</span> Closures</h4>
<div class="outline-text-4" id="text-1-6-7">
<p>
elisp方言默认不支持closure，所以下面的代码不会像Scheme或Common Lisp一样执行。
</p>

<p>
参考：
</p>
<ul class="org-ul">
<li><a href="https://www.emacswiki.org/emacs/LexicalBinding">EmacsWiki: Lexical Binding</a></li>
<li><a href="https://www.emacswiki.org/emacs/DynamicBindingVsLexicalBinding">EmacsWiki: Dynamic Binding Vs Lexical Binding</a></li>
<li><a href="https://nullprogram.com/blog/2013/12/30/">Emacs Lisp Readable Closures « null program</a></li>
<li><a href="https://www.jamesporter.me/2013/06/14/emacs-lisp-closures-exposed.html">https://www.jamesporter.me/2013/06/14/emacs-lisp-closures-exposed.html</a></li>
<li><a href="http://technical-dresese.blogspot.com/2011/04/brief-demonstration-of-emacs-new.html">Technical Dresese: A brief demonstration of emacs new lexical bindings</a></li>
</ul>

<pre class="example">
(defun make-adder (x)
  (lambda (y) (+ x y)))


ELISP&gt;
ELISP&gt; (make-adder 3)
(lambda
  (y)
  (+ x y))

ELISP&gt; ((make-adder 3) 4)
    ** Eval error **  Invalid function: (make-adder 3)
ELISP&gt; (funcall (make-adder 3) 4)
    ** Eval error **  Symbol's value as variable is void: x
ELISP&gt; (map (make-adder 3) '(1 2 3 4 5))
    ** Eval error **  Symbol's value as variable is void: x
ELISP&gt;
</pre>

<p>
支持closure的代码：
</p>
<pre class="example">
(setq lexical-binding t)

(defun make-adder (x)
  (lambda (y) (+ x y)))

ELISP&gt; (make-adder 3)
(closure
 ((x . 3)
  t)
 (y)
 (+ x y))

ELISP&gt; ((make-adder 3) 4)
    ** Eval error **  Invalid function: (make-adder 3)
ELISP&gt;

ELISP&gt; (funcall (make-adder 3) 4)
7
ELISP&gt;

ELISP&gt; (mapcar (make-adder 3) '(1 2 3 4 5))
(4 5 6 7 8)


;;;; Sometimes is better to create macro rather than a higher order function


(defmacro make-sum-fun (f1 f2)
  `(lambda (x) (+ (,f1 x) (,f2 x))))

ELISP&gt;
ELISP&gt; (funcall (make-sum-fun sin cos) 3)
-0.8488724885405782
ELISP&gt;
ELISP&gt; (make-sum-fun sin cos)
(closure
 (t)
 (x)
 (+
  (sin x)
  (cos x)))

ELISP&gt; (map (make-sum-fun sin cos) '(1 2 3 4 5))
(1.3817732906760363 0.4931505902785393 -0.8488724885405782 -1.4104461161715403 -0.6752620891999122)
</pre>

<p>
在 <code>~/.emacs.d/init.el</code> 中添加如下配置以支持closure.
</p>
<pre class="example">
(setq lexical-binding t)
</pre>
</div>
</div>
</div>
<div id="outline-container-org2f1427d" class="outline-3">
<h3 id="org2f1427d"><span class="section-number-3">1.7</span> 列表操作</h3>
<div class="outline-text-3" id="text-1-7">
<p>
参考：
</p>
<ul class="org-ul">
<li><a href="https://www.fincher.org/tips/Languages/Emacs.shtml">https://www.fincher.org/tips/Languages/Emacs.shtml</a></li>
</ul>

<pre class="example">
;; Defining a List
;;
;; An emacs list can contain elements of almost any type.
;;
ELISP&gt; '( "a" 2323 "b" 21.2323 "hello" "emacs" nil () (34 134) '(+ 2 3 5))
("a" 2323 "b" 21.2323 "hello" "emacs" nil nil
 (34 134)
 '(+ 2 3 5))

ELISP&gt; (quote (1 3 3 4 5))
(1 3 3 4 5)

;;;;; Empty List
;;
ELISP&gt; nil
nil
ELISP&gt; '()
nil
ELISP&gt;

;; Length of a list
ELISP&gt; (length '(1 2 3 4 5 6))
6
ELISP&gt;


;; nth element of a list
;;
ELISP&gt; (nth 0 '(0 1 2 3 4 5))
0
ELISP&gt; (nth 2 '(0 1 2 3 4 5))
2
ELISP&gt; (nth 5 '(0 1 2 3 4 5))
5
ELISP&gt; (nth 10 '(0 1 2 3 4 5))
nil
ELISP&gt;


;; Membership test
;; member returns null if the element is not member of the list
;;
ELISP&gt; (member 2 '(0 1 2 3 4 5))
(2 3 4 5)

ELISP&gt; (member 10 '(0 1 2 3 4 5))
nil
ELISP&gt;

;; Position of list element (prior to emacs 24.4)
;;
ELISP&gt; (position 7 '(5 6 7 8))
2

ELISP&gt; (position 17 '(5 6 7 8))
nil
ELISP&gt;

;; Position of list element (emacs 24.4 or later)
;;
ELISP&gt; (cl-position 7 '(5 6 7 8))
2

ELISP&gt; (cl-position 17 '(5 6 7 8))
nil
ELISP&gt;

;; cdr
;;
;; Removes first element of the list, returns the list tail.
;;
ELISP&gt; (cdr '(1 2 3 4 5))
(2 3 4 5)

;; car
;;
;; Returns the first list element
;;
ELISP&gt; (car '(1 2 3 4 5))
1
ELISP&gt;


;; cons
;;
;; List constructor
;;
ELISP&gt; (cons 10 '(1 2 3 4))
(10 1 2 3 4)

ELISP&gt; (cons 1 (cons 2 (cons 3 (cons 4 (cons 5 '())))))
(1 2 3 4 5)

;; Last element of a list
;;
;;
ELISP&gt; (car (last '(1 2 3 4 5)))
5
ELISP&gt;


;; Reverse a list
;;
ELISP&gt; (reverse '(1 2 3 4 5))
(5 4 3 2 1)


;; Append lists
;;
;; Note: nil also means an empty list
;;
ELISP&gt; (append '(1 2) '( "a" "b" "c" "d"))
(1 2 "a" "b" "c" "d")

ELISP&gt; (append '(1 2) nil '( "a" "b" "c" "d") nil)
(1 2 "a" "b" "c" "d")



;; Filter list elements given a predicate function
;;
;;
ELISP&gt; (remove-if-not (lambda (x) (&gt; x 2)) '(1 2 3 4 5 6 7 8 9 10))
(3 4 5 6 7 8 9 10)

;; Test if list is empty
;;
ELISP&gt; (null '(1 2 3 4 5))
nil
ELISP&gt; (null '())
t
ELISP&gt; (null nil)
t
ELISP&gt;

;; Drop the firsts n elements of a list
;;
;;
ELISP&gt; (nthcdr 2 '(1 2 3 4))
(3 4)

ELISP&gt; (nthcdr 3 '(1 2 3 4))
(4)

ELISP&gt; (nthcdr 13 '(1 2 3 4))
nil
ELISP&gt;

;; Delete an element of a list
;;
;;
ELISP&gt; (delq 1 '(1 2 3 4))
(2 3 4)


ELISP&gt; (delq 10 '(1 2 3 4))
(1 2 3 4)

;; It doesn't work to delete sublists
;;
ELISP&gt; (delq (5) '(1 2 (5) 3 4))
    ** Eval error **  Invalid function: 5
ELISP&gt; (delq '(5) '(1 2 (5) 3 4))
(1 2
   (5)
   3 4)

ELISP&gt; (delete '(5) '(1 2 (5) 3 4))
(1 2 3 4)

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;; Convert Vector to List
;;
;;
ELISP&gt; (coerce [1 2 3] 'list)
(1 2 3)

;; Convert List to Vector
;;
ELISP&gt; (coerce '(1 2 3) 'vector)
[1 2 3]

ELISP&gt; (number-sequence 0 10 2)
(0 2 4 6 8 10)

ELISP&gt; (number-sequence 9 4 -1)
(9 8 7 6 5 4)


;; Modify list variables.
;;
ELISP&gt; alist
(a b c d e)

ELISP&gt; (push 'f alist)
(f a b c d e)

ELISP&gt; alist
(f a b c d e)

ELISP&gt; (pop alist)
f

ELISP&gt; alist
(a b c d e)

ELISP&gt; (pop alist)
a
ELISP&gt; alist
(b c d e)

ELISP&gt;
</pre>
</div>
</div>
<div id="outline-container-org08c3ecb" class="outline-3">
<h3 id="org08c3ecb"><span class="section-number-3">1.8</span> 关联列表和属性列表</h3>
<div class="outline-text-3" id="text-1-8">
</div>
<div id="outline-container-orgb16e7cb" class="outline-4">
<h4 id="orgb16e7cb"><span class="section-number-4">1.8.1</span> 概览</h4>
<div class="outline-text-4" id="text-1-8-1">
<p>
关联列表是一系列cons对，这里我可以称作 <code>clist</code> 或者 由两个元素组成的列表的集合，可以称为 <code>alist</code>
</p>

<p>
<b>关联列表类型：clist</b>
</p>

<p>
键: a, x, 2 and 4 值: b, y, 3 and (1 2 3 4 5)
</p>
<pre class="example">
ELISP&gt; '((a . b) (x . y) (2 . 3) (4 . (1 2 3 4 5)))
((a . b)
 (x . y)
 (2 . 3)
 (4 1 2 3 4 5)

ELISP&gt; (cons 'a 'b)
(a . b)

ELISP&gt; (cons 'a (cons 'b (cons 'c nil)))
(a b c)
</pre>

<p>
<b>关联列表类型：alist</b>
</p>
<pre class="example">
ELISP&gt; '((a  b) (x  y) (2  3) (4  (1 2 3 4 5)))
((a b)
 (x y)
 (2 3)
 (4
  (1 2 3 4 5)))

ELISP&gt; (list (list 'a 'b) (list 'x 'y) (list 2 3) (list 2 '(1 2 3 4 5)))
((a b)
 (x y)
 (2 3)
 (2
  (1 2 3 4 5)))
</pre>
<p>
<code>alist</code> 不像 <code>clist</code> 有歧义。
</p>

<p>
<b>属性列表：Plist</b>
</p>

<p>
属性列表是连续的键值对集合，它的优势是括号少和可读性高。
</p>
<pre class="example">
'(:key1 value1 :key2 value2 :key3 1002.23 :key4 (a b c d e))

ELISP&gt; '(:key1 value1 :key2 value2 :key3 1002.23 :key4 (a b c d e))
(:key1 value1 :key2 value2 :key3 1002.23 :key4
       (a b c d e))

;;; It is more useful in configuration files

(
:key1  value1
:key2  value2
:key3  value3
:key4  (a b c d e )
)
</pre>
</div>
</div>
<div id="outline-container-org5723aa3" class="outline-4">
<h4 id="org5723aa3"><span class="section-number-4">1.8.2</span> 关联列表/Alist</h4>
<div class="outline-text-4" id="text-1-8-2">
<pre class="example">
ELISP&gt; (setq dict
'((pine . cones)
 (oak . acorns)
 (maple . seeds)))
((pine . cones)
 (oak . acorns)
 (maple . seeds))

ELISP&gt; dict
((pine . cones)
 (oak . acorns)
 (maple . seeds))

;; Get a cell associated with a key
;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
ELISP&gt;
ELISP&gt; (assoc 'oak dict)
(oak . acorns)

ELISP&gt; (assoc 'wrong dict)
nil

;; Get a Key
;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

ELISP&gt; (car (assoc 'oak dict))
oak
ELISP&gt; (cdr (assoc 'oak dict))
acorns
ELISP&gt;


ELISP&gt; (car (assoc 'oak dict))
oak
ELISP&gt;

;; Get all keys
;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

ELISP&gt; (mapcar #'car dict)
(pine oak maple)

;; Get all values
;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

ELISP&gt; (mapcar #'cdr dict)
(cones acorns seeds)
</pre>

<p>
例：过滤多个键
</p>
<pre class="example">
ELISP&gt; (defvar language-list
  '(
   ("io" . ((:command . "io")
	     (:description . "Run IO Language script")))
    ("lua" . ((:command . "lua")
	      (:description . "Run Lua script")))
    ("groovy" . ((:command . "groovy")
		 (:description . "Run Groovy")))
    ("scala" . ((:command . "scala")
		(:cmdopt . "-Dfile.encoding=UTF-8")
		(:description . "Run Scala file with scala command")))

    ("haml" . ((:command . "haml")
	       (:exec    . "%c %o %s")
	       (:description . "Convert HAML to HTML")))
    ("sass" . ((:command . "sass")
	       (:exec    . "%c %o --no-cac")))
 ))
language-list


ELISP&gt; (assoc  "scala"  language-list )
("scala"
 (:command . "scala")
 (:cmdopt . "-Dfile.encoding=UTF-8")
 (:description . "Run Scala file with scala command"))

ELISP&gt; (assoc  "lua"  language-list )
("lua"
 (:command . "lua")
 (:description . "Run Lua script"))

ELISP&gt; (assoc  "wrong"  language-list )
nil

ELISP&gt; (assoc ':command (assoc  "scala"  language-list ))
(:command . "scala")

ELISP&gt; (cdr (assoc ':command (assoc  "scala"  language-list )))
"scala"
ELISP&gt;

ELISP&gt; (assoc ':description (assoc  "scala"  language-list ))
(:description . "Run Scala file with scala command")

ELISP&gt; (cdr (assoc ':description (assoc  "scala"  language-list )))
"Run Scala file with scala command"
ELISP&gt;

ELISP&gt; (mapcar 'car language-list)
("io" "lua" "groovy" "scala" "haml" "sass")

ELISP&gt; (mapcar 'cdr language-list)
(((:command . "io")
  (:description . "Run IO Language script"))
 ((:command . "lua")
  (:description . "Run Lua script"))
 ((:command . "groovy")
  (:description . "Run Groovy"))
 ((:command . "scala")
  (:cmdopt . "-Dfile.encoding=UTF-8")
  (:description . "Run Scala file with scala command"))
 ((:command . "haml")
  (:exec . "%c %o %s")
  (:description . "Convert HAML to HTML"))
 ((:command . "sass")
  (:exec . "%c %o --no-cac")))

ELISP&gt;

ELISP&gt; (mapcar (lambda (x) (
			     list
			     (car x)
			     (cdr x)
			     ))
			    language-list)
(("io"
  ((:command . "io")
   (:description . "Run IO Language script")))
 ("lua"
  ((:command . "lua")
   (:description . "Run Lua script")))
 ("groovy"
  ((:command . "groovy")
   (:description . "Run Groovy")))
 ("scala"
  ((:command . "scala")
   (:cmdopt . "-Dfile.encoding=UTF-8")
   (:description . "Run Scala file with scala command")))
 ("haml"
  ((:command . "haml")
   (:exec . "%c %o %s")
   (:description . "Convert HAML to HTML")))
 ("sass"
  ((:command . "sass")
   (:exec . "%c %o --no-cac"))))

ELISP&gt;

ELISP&gt; (mapcar (lambda (x) (
     list
     (car x)
     (assoc ':command       (cdr x))
     (assoc ':cmdopt        (cdr x))
     (assoc ':description   (cdr x))
     ))
    language-list)

(("io"
  (:command . "io")
  nil
  (:description . "Run IO Language script"))
 ("lua"
  (:command . "lua")
  nil
  (:description . "Run Lua script"))
 ("groovy"
  (:command . "groovy")
  nil
  (:description . "Run Groovy"))
 ("scala"
  (:command . "scala")
  (:cmdopt . "-Dfile.encoding=UTF-8")
  (:description . "Run Scala file with scala command"))
 ("haml"
  (:command . "haml")
  nil
  (:description . "Convert HAML to HTML"))
 ("sass"
  (:command . "sass")
  nil nil))

ELISP&gt;


ELISP&gt; (mapcar (lambda (x) (
	 list
	 (car x)
	 (cdr (assoc ':command   (cdr x)))
	 (cdr (assoc ':cmdopt       (cdr x)))
	 (cdr (assoc ':description   (cdr x)))
	 ))

	language-list)
(("io" "io" nil "Run IO Language script")
 ("lua" "lua" nil "Run Lua script")
 ("groovy" "groovy" nil "Run Groovy")
 ("scala" "scala" "-Dfile.encoding=UTF-8" "Run Scala file with scala command")
 ("haml" "haml" nil "Convert HAML to HTML")
 ("sass" "sass" nil nil))

ELISP&gt;

ELISP&gt; (defun get-value (alist key) (cdr (assoc key alist)))
get-value
ELISP&gt; (get-value language-list "scala")
((:command . "scala")
 (:cmdopt . "-Dfile.encoding=UTF-8")
 (:description . "Run Scala file with scala command"))

ELISP&gt; (get-value language-list "lua")
((:command . "lua")
 (:description . "Run Lua script"))

ELISP&gt;
ELISP&gt; (get-value language-list "0")
nil
ELISP&gt;


ELISP&gt; (defun get-key-value (alist key field)
		(cdr (assoc  field  (cdr (assoc key alist))  )))
get-key-value
ELISP&gt;
ELISP&gt; (get-key-value language-list "scala" ':description)
"Run Scala file with scala command"
ELISP&gt;

ELISP&gt; (get-key-value language-list "scala" ':command)
"scala"
ELISP&gt;
</pre>
</div>
</div>
<div id="outline-container-orgfa6bfa7" class="outline-4">
<h4 id="orgfa6bfa7"><span class="section-number-4">1.8.3</span> 属性列表</h4>
<div class="outline-text-4" id="text-1-8-3">
<pre class="example">
ELISP&gt; (defvar plst (list :buffer (current-buffer) :line 10 :pos 2000))
plst

ELISP&gt;
ELISP&gt; (plist-get plst :line)
10

ELISP&gt; (plist-get plst :pos)
2000

ELISP&gt; (plist-get plst :buffer)
#&lt;buffer *ielm*&gt;
ELISP&gt;

ELISP&gt;
ELISP&gt; (plist-get plst :buffdfds)
nil
ELISP&gt;

ELISP&gt; (plist-member plst :buffer)
(:buffer #&lt;buffer *ielm*&gt; :line 10 :pos 2000)

ELISP&gt; (plist-member plst :bufferasd)
nil
ELISP&gt;

ELISP&gt; (plist-put plst :winconf (current-window-configuration))
(:buffer #&lt;buffer *ielm*&gt; :line 10 :pos 2000 :winconf #&lt;window-configuration&gt;)

ELISP&gt; plst
(:buffer #&lt;buffer *ielm*&gt; :line 10 :pos 2000 :winconf #&lt;window-configuration&gt;)

ELISP&gt;
</pre>
</div>
</div>
<div id="outline-container-org8cd25be" class="outline-4">
<h4 id="org8cd25be"><span class="section-number-4">1.8.4</span> 转换Alist成Plist和vice-versa</h4>
<div class="outline-text-4" id="text-1-8-4">
<pre class="example">
;; Alist to plist
(defun plist-&gt;alist (plist)
  (if (null plist)
      '()
      (cons
       (list (car plist) (cadr plist))
       (plist-&gt;alist (cddr plist)))))

ELISP&gt; (plist-&gt;alist (list :x 10 :y 20 :name "point"))
((:x 10)
 (:y 20)
 (:name "point"))

;;; Converts association list to plist
(defun alist-&gt;plist (assocl)
  (if (null assocl)
      '()
    (let
    ((hd (car assocl))
     (tl (cdr assocl)))
      (cons (car hd)
	(cons (cadr hd)
	  (alist-&gt;plist tl))))))

;;; Converts plist to clist (List of cons pairs)
(defun plist-&gt;clist (plist)
  (if (null plist)
      '()
      (cons
       (cons (car plist) (cadr plist))
      (plist-&gt;clist (cddr plist)))))

ELISP&gt; (plist-&gt;clist (list :x 10 :y 20 :name "point"))
((:x . 10)
 (:y . 20)
 (:name . "point"))

;; Separates a property list into two lists of keys and values.
;;
(defun plist-&gt;kv (plist)
  (let ((alist (plist-&gt;alist plist)))
    (cons
     (mapcar #'car alist)
     (mapcar #'cdr alist))))

ELISP&gt; (setq al (plist-&gt;alist (list :x 10 :y 20 :name "point")))
((:x 10)
 (:y 20)
 (:name "point"))

ELISP&gt; (alist-&gt;plist al)
(:x 10 :y 20 :name "point")

ELISP&gt;

(setq keylist
    '("M-i"  'previous-line
      "M-j"  'backward-char
      "M-k"  'next-line
      "M-l"  'forward-char))


ELISP&gt; (setq kv (plist-&gt;kv keylist))
(("M-i" "M-j" "M-k" "M-l")
 ('previous-line)
 ('backward-char)
 ('next-line)
 ('forward-char))

ELISP&gt; (car kv)
("M-i" "M-j" "M-k" "M-l")

ELISP&gt; (cdr kv)
(('previous-line)
 ('backward-char)
 ('next-line)
 ('forward-char))

ELISP&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcc203a8" class="outline-3">
<h3 id="orgcc203a8"><span class="section-number-3">1.9</span> 字符串</h3>
<div class="outline-text-3" id="text-1-9">
<pre class="example">
;; Split String

ELISP&gt; (split-string "  two words ")
("two" "words")

ELISP&gt;

ELISP&gt; (split-string "o\no\no" "\n" t)
("o" "o" "o")

ELISP&gt; (split-string "Soup is good food" "o*" t)
("S" "u" "p" " " "i" "s" " " "g" "d" " " "f" "d")

ELISP&gt;

;; Format String

ELISP&gt; (format-time-string "%Y/%m/%d %H:%M:%S" (current-time))
"2015/06/26 06:10:04"
ELISP&gt;
ELISP&gt;


;; Concatenate Strings

ELISP&gt; (concat "The " "quick brown " "fox.")
"The quick brown fox."
ELISP&gt;

ELISP&gt; (mapconcat 'identity '("aaa" "bbb" "ccc") ",")
"aaa,bbb,ccc"
ELISP&gt; (split-string "aaa,bbb,ccc" ",")
ELISP&gt; (split-string "aaa,bbb,ccc" ",")
("aaa" "bbb" "ccc")

;; String Width

ELISP&gt; (string-width "hello world")
11
ELISP&gt;
ELISP&gt; (substring "Freedom Land" 0 5)
"Freed"
ELISP&gt;
ELISP&gt; (string-match "ce" "central park")
0
ELISP&gt; (string-match "gt" "central park")
nil
ELISP&gt;


;;;;; Misc

ELISP&gt; (make-string 5 ?x)
"xxxxx"
ELISP&gt; (make-string 5 ?a)
"aaaaa"
ELISP&gt; (make-string 5 ?r)
"rrrrr"
ELISP&gt; (make-string 15 ?r)
"rrrrrrrrrrrrrrr"
ELISP&gt;
</pre>

<p>
<b>elisp符号/字符串转换</b>
</p>
<pre class="example">
; Convert a symbol to string
ELISP&gt; (symbol-name 'wombat)
"wombat"

; Convert a String to Symbol
ELISP&gt; (intern "wombat")
wombat
</pre>

<p>
<b>读取字符串中的S表达式</b>
</p>
<pre class="example">
ELISP&gt; (read-from-string
	    "(
	       (POINT1  (X  10.2323)  (Y   20.2323))
	       (POINT2  (x  0.2)          (Y 923.23))
	       (POINT3  (x -10.5)       (Y 78,23))
	     )")
(((POINT1
   (X 10.2323)
   (Y 20.2323))
  (POINT2
   (x 0.2)
   (Y 923.23))
  (POINT3
   (x -10.5)
   (Y 78
      (\, 23))))
 . 174)

ELISP&gt;
</pre>
</div>
</div>
<div id="outline-container-orgb594a95" class="outline-3">
<h3 id="orgb594a95"><span class="section-number-3">1.10</span> 符号</h3>
<div class="outline-text-3" id="text-1-10">
<pre class="example">
;;; Convert a string to symbol

ELISP&gt; (intern "a-symbol")
a-synmbol
ELISP&gt; (symbolp (intern "a-symbol"))
t
ELISP&gt;

;;; Convert a symbol to a string

ELISP&gt; (symbol-name 'symbol)
"symbol"
ELISP&gt;

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

ELISP&gt; (setq sym '(1 2 3 4 5))
(1 2 3 4 5)

ELISP&gt; sym
(1 2 3 4 5)

;;; Test if variable is defined
ELISP&gt; (boundp 'sym)
t
ELISP&gt;

;;; Test if variable sym is a symbol
ELISP&gt; (symbolp sym)
nil

;;; Test if the symbol sym is a symbol
ELISP&gt; (symbolp 'sym)
t
ELISP&gt;

;; Get symbol as string
;;
ELISP&gt; (symbol-name 'sym)
"sym"

;; Get value from a symbol
;;
ELISP&gt; (symbol-value 'sym)
(1 2 3 4 5)

ELISP&gt; (symbol-function 'sym)
nil

ELISP&gt; (symbol-plist 'sym)
nil

;;-------------------------;;

ELISP&gt; (defun func (x y) (+ (* 3 x) (* 4 y)))
func

ELISP&gt; (func 10 2)
38
ELISP&gt;

;;; Check if function is defined
;;
ELISP&gt; (fboundp 'func)
t
ELISP&gt; (fboundp 'sym)
nil
ELISP&gt;


ELISP&gt; (symbol-name 'func)
"func"

ELISP&gt; (symbol-value 'func)
    ** Eval error **  Symbol's value as variable is void: func
ELISP&gt; (symbol-function 'func)
(lambda
  (x y)
  (+
   (* 3 x)
   (* 4 y)))

ELISP&gt; (symbol-plist 'func)
nil
ELISP&gt;

;;; Function Source Code

ELISP&gt; (symbol-function #'func)
(lambda
  (x y)
  (+
   (* 3 x)
   (* 4 y)))


;; Test if function is an elisp primitive

ELISP&gt; (subrp (symbol-function 'goto-char))
t
ELISP&gt;
</pre>
</div>
</div>
<div id="outline-container-org8aa51e9" class="outline-3">
<h3 id="org8aa51e9"><span class="section-number-3">1.11</span> 类型转换</h3>
<div class="outline-text-3" id="text-1-11">
<p>
<b>类型查询</b>
</p>
<pre class="example">
ELISP&gt; (type-of 1000)
integer

ELISP&gt; (type-of 1000.3434)
float
ELISP&gt;

ELISP&gt; (type-of "lisp")
string

ELISP&gt; (type-of '(1 2 3 4 5))
cons
ELISP&gt; (type-of (list 'cos 'sin 1 2 3 4 5))
cons
ELISP&gt;

ELISP&gt; (type-of [1 2 3 4])
vector

ELISP&gt; (type-of 'elisp-mode-map)
symbol
ELISP&gt;

ELISP&gt; (type-of #'cos)
symbol
ELISP&gt;
</pre>

<p>
<b>类型判断</b>
</p>
<pre class="example">
;; Test if it is a number
;;-----------------------------------

ELISP&gt; (numberp 1000)
t
ELISP&gt; (numberp 10e4)
t
ELISP&gt; (numberp '(1 2 3 4))
nil
ELISP&gt; (numberp "hello world")
nil
ELISP&gt;


;; Test if it is a string
;;-----------------------------------

ELISP&gt; (stringp "Emacs")
t
ELISP&gt; (stringp '(1 2 3 4))
nil
ELISP&gt;

;; Test if ti is a symbol
;;------------------------------------
ELISP&gt; (symbolp 'emacs)
t
ELISP&gt; (symbolp #'emacs)
t
ELISP&gt; (symbolp "something")
nil
ELISP&gt; (symbolp 10000)
nil
ELISP&gt;


;; Test if it is a list
;;-----------------------------------

ELISP&gt; (listp '(1 2 3 4))
t
ELISP&gt; (listp [1 2 3 4])
nil
ELISP&gt; (listp "hello world")
nil
ELISP&gt;


;; Test if it is a vector
;;-----------------------------------

ELISP&gt; (vectorp ["Lisp" "Emacs" "Scheme" "Clojure"])
t
ELISP&gt;
ELISP&gt; (vectorp '(1 2 3))
nil
ELISP&gt; (vectorp "lisp")
nil
ELISP&gt;
</pre>

<p>
<b>数字/字符串转换</b>
</p>
<pre class="example">
ELISP&gt;
ELISP&gt; (number-to-string 1000)
"1000"

ELISP&gt; (string-to-number "200")
200
ELISP&gt;
ELISP&gt;
</pre>

<p>
<b>符号/字符串转换</b>
</p>
<pre class="example">
ELISP&gt; (symbol-name 'my-symbol)
"my-symbol"

ELISP&gt; (symbol-name :my-symbol)
":my-symbol"
ELISP&gt;

ELISP&gt; (intern "some-symbol")
some-symbol
</pre>

<p>
<b>S表达式/字符串转换</b>
</p>
<ul class="org-ul">
<li>read: 解析S表达式</li>
</ul>
<pre class="example">
ELISP&gt;
ELISP&gt; (setq raw "(:x 10 :y 20 :z 30 :w \"hello world\")")
"(:x 10 :y 20 :z 30 :w \"hello world\")"
ELISP&gt;
ELISP&gt; (read raw)
(:x 10 :y 20 :z 30 :w "hello world")

ELISP&gt; (plist-get (read raw) :x)
10
ELISP&gt; (plist-get (read raw) :w)
"hello world"
ELISP&gt;
</pre>

<ul class="org-ul">
<li>prin1-to-string: 序列化S表达式</li>
</ul>
<pre class="example">
ELISP&gt; (setq sexp '(:x 10 :y 20 :z 30 :w "hello world"))
(:x 10 :y 20 :z 30 :w "hello world")

ELISP&gt; sexp
(:x 10 :y 20 :z 30 :w "hello world")

ELISP&gt; (prin1-to-string sexp)
"(:x 10 :y 20 :z 30 :w \"hello world\")"
ELISP&gt;
</pre>
</div>
</div>
<div id="outline-container-org5ef1f2f" class="outline-3">
<h3 id="org5ef1f2f"><span class="section-number-3">1.12</span> 求值</h3>
<div class="outline-text-3" id="text-1-12">
<p>
<b>S表达式求值</b>
</p>
<pre class="example">
ELISP&gt; (eval '(+ 1 2 3 4 5))
15
ELISP&gt;


ELISP&gt; '(defun func1(x)(* 10 x))
(defun func1
    (x)
  (* 10 x))

ELISP&gt;

ELISP&gt; '((+ 1 3) (* 4 5) (- 8 9))
((+ 1 3)
 (* 4 5)
 (- 8 9))

ELISP&gt; (eval '(defun func1(x)(* 10 x)))
func1
ELISP&gt; (func1 5)
50
ELISP&gt;


ELISP&gt; (mapcar 'eval '((+ 1 3) (* 4 5) (- 8 9)))
(4 20 -1)
</pre>

<p>
<b>字符串求值</b>
</p>
<pre class="example">
ELISP&gt; (defun eval-string (str) (eval (read str)))
eval-string

ELISP&gt; (eval-string "(+ 1 2 3 4 5 6)")
21
ELISP&gt;

ELISP&gt; (eval-string "(defun func2(x)(* 10 x)))")
func2
ELISP&gt; (func2 6)
60
ELISP&gt;
</pre>

<p>
<b>S表达式格式化为字符串</b>
</p>
<pre class="example">
ELISP&gt; (setq sexp1 '(+ 1 (* 2 3)))
(+ 1
   (* 2 3))

ELISP&gt; (eval sexp1)
7

ELISP&gt; (format "%S" sexp1)
"(+ 1 (* 2 3))"
ELISP&gt;
</pre>

<p>
<b>Elisp中的求值命令</b>
</p>
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">命令</th>
<th scope="col" class="org-left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">M-x eval-defun</td>
<td class="org-left">函数求值</td>
</tr>

<tr>
<td class="org-left">M-x eval-region</td>
<td class="org-left">区域内表达式求值</td>
</tr>

<tr>
<td class="org-left">M-x eval-buffer</td>
<td class="org-left">buffer内表达式求值</td>
</tr>

<tr>
<td class="org-left">M-x eval-expression</td>
<td class="org-left">输入框输入求值</td>
</tr>

<tr>
<td class="org-left">M-x load-file</td>
<td class="org-left">文件加载</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgbe4d00c" class="outline-3">
<h3 id="orgbe4d00c"><span class="section-number-3">1.13</span> Defalias</h3>
<div class="outline-text-3" id="text-1-13">
<p>
内置宏 <code>defalias</code> 可以为emaca函数定义简短的名字。
</p>

<p>
参考：<a href="http://ergoemacs.org/emacs/emacs_alias.html">Emacs: Use Alias for Fast M-x</a>
</p>

<pre class="example">
ELISP&gt; (require 'cl)
cl
ELISP&gt;

ELISP&gt; (defalias 'map 'mapcar)
map
ELISP&gt; (map (lambda (x) (* 3 x)) (list 1 2 3 4 5 6))
(3 6 9 12 15 18)

ELISP&gt; (defalias 'filter 'remove-if-not) ;; remove-if-not comes from "cl" library
filter

;;; Filter all buffers bounded to a file
;;
ELISP&gt; (filter #'buffer-file-name (buffer-list))
(#&lt;buffer README.org&gt; #&lt;buffer Projects.wiki.org&gt; #&lt;buffer Index.wiki.org&gt; #&lt;buffer settings.org&gt; #&lt;buffer project.org&gt;)

;;; Reject all buffers which are not bounded to a file
ELISP&gt; (reject #'buffer-file-name (buffer-list))
(#&lt;buffer *ielm*&gt; #&lt;buffer *Help*&gt; #&lt;buffer  *Minibuf-1*&gt; #&lt;buffer emacs&gt; #&lt;buffer *scratch*&gt; ..)

;;; The command M-x org-html-export-to-htm will export this document (README.org) to html
;;  the command M-x org2html will do so too.
;;
(defalias #'org2html #'org-html-export-to-html)

;;
;;  It is also useful to create more convenient names for Emacs API
;; in a namsepace-like fashion that makes easier to find functions and
;; autocomplete functions, for instance:
;;
(defalias 'file/extension         'file-name-extension)
(defalias 'file/extension-sans    'file-name-sans-extension)
(defalias 'file/path-expand       'expand-file-name)
(defalias 'file/filename          'file-name-nondirectory)
(defalias 'file/path-relative     'file-relative-name)
(defalias 'file/rename            'rename-file)
(defalias 'file/delete            'delete-file)
(defalias 'file/copy              'copy-file)

;;; To find the documentation of a function group defined in this fashion
;; Enter M-x apropos  and then type file/
(apropos "file/")

ELISP&gt; (set-buffer "README.org")
#&lt;buffer README.org&gt;
ELISP&gt; (buffer-file-name)
"/home/tux/PycharmProjects/emacs/README.org"
ELISP&gt; (file/basename (buffer-file-name))
"README"
ELISP&gt; (file/extension (buffer-file-name))
"org"
ELISP&gt; (file/filename (buffer-file-name))
"README.org"
ELISP&gt;
</pre>
</div>
</div>
<div id="outline-container-org207463a" class="outline-3">
<h3 id="org207463a"><span class="section-number-3">1.14</span> 控制结构</h3>
<div class="outline-text-3" id="text-1-14">
</div>
<div id="outline-container-org6bc86de" class="outline-4">
<h4 id="org6bc86de"><span class="section-number-4">1.14.1</span> Conditional Statement</h4>
<div class="outline-text-4" id="text-1-14-1">
<p>
<b>If Else 语句</b>
</p>
<pre class="example">
;;
;; Any value different from nil or '() is true, otherwise false.
;;

;; True
;;
ELISP&gt; (if t 5 6)
5

ELISP&gt; (if 10 5 6)
5

ELISP&gt; (if 0 5 6)
5

;; False
ELISP&gt; (if nil 5 6)
6

ELISP&gt; (if '() 5 6)
6


;; Inverting Predicate
;;
ELISP&gt; (if (not t) 5 6)
6

ELISP&gt; (if (not nil) 5 6)
5


ELISP&gt; (if (&lt; 5 10)  (message "less than 10") (message "greater or equal to 10") )
"less than 10"

ELISP&gt; (if (&lt; 30 10)  (message "less than 10") (message "greater or equal to 10") )
"greater or equal to 10"
ELISP&gt;

;;; If else with multiple statements

ELISP&gt; (setq x 10)
10

ELISP&gt; (if (&gt; x 5)
       ;; Then Statement
       (progn

	 (message "Positive Number")
	 (print "Greater than five")
	 (split-window-vertically)
	 78 ;;  Return Value
	)
     ;; Else Statement
     (progn
       (print "Less than five")
       (split-window-horizontally)
       12 ;;  Return Value
     ))

"Greater than five"

78
ELISP&gt;
</pre>

<p>
<b>When语句</b>
</p>
<pre class="example">
ELISP&gt; (when t 3)
3

ELISP&gt; (when nil 3)
nil


ELISP&gt; (setq x 5)
5

ELISP&gt; (when (&gt; x 3)
	 (message "Less than 3"))
"Less than 3"
ELISP&gt;

ELISP&gt; (setq x 1)
1

ELISP&gt; (when (&gt; x 3)
	 (message "Less than 3"))
nil
ELISP&gt;


;;;;; When with Multiple Statements

ELISP&gt; (setq x 10)
10

ELISP&gt; (when (&gt; x 7)
     (progn
       (message "Greater than 7 OK.")
       (message "Print message 2")
       (split-window-horizontally)
      ))

 #&lt;window 8 on *ielm*&gt;
ELISP&gt;
</pre>
</div>
</div>
<div id="outline-container-org5779000" class="outline-4">
<h4 id="org5779000"><span class="section-number-4">1.14.2</span> Cond - Case Switch</h4>
<div class="outline-text-4" id="text-1-14-2">
<pre class="example">
ELISP&gt; (setq a 3)       ;; a = 3
3
ELISP&gt;

ELISP&gt; (cond
	((evenp a) a)       ;; if   (a % 2 == 0)    ==&gt; a
	((&gt; a 7) (/ a 2))   ;; elif (a &gt; 7)         ==&gt; a/2
	((&lt; a 5) (- a 1))   ;; elif (a &lt; 5)         ==&gt; a-1
	(t 7)               ;; else                 ==&gt; 7
	)
2
ELISP&gt;
</pre>
</div>
</div>

<div id="outline-container-org4c51d00" class="outline-4">
<h4 id="org4c51d00"><span class="section-number-4">1.14.3</span> CL-Case - Case Switch</h4>
<div class="outline-text-4" id="text-1-14-3">
<pre class="example">
(defun test-cl-case (operation x y)
  (cl-case operation
    (:mul (* x y))
    (:add (+ x y))
    (:sub (- x y))
    (:div (/ x y))
    (otherwise nil)))

ELISP&gt; (test-cl-case :mul 2 10)
20

ELISP&gt; (test-cl-case :sub 10 2)
8

ELISP&gt; (test-cl-case :add 10 2)
12
ELISP&gt; (test-cl-case :div 10 2)
5

ELISP&gt; (test-cl-case 'dummy 20 10)
nil
</pre>
</div>
</div>

<div id="outline-container-org2951eee" class="outline-4">
<h4 id="org2951eee"><span class="section-number-4">1.14.4</span> 循环</h4>
<div class="outline-text-4" id="text-1-14-4">
<p>
<b>Dolist</b>
</p>
<pre class="example">
ELISP&gt; (dolist (h '(a b c)) (print h))

a

b

c

nil

ELISP&gt; (dolist (x '(1 2 3)) (print (* 2 x)))

2

4

6

nil
ELISP&gt;

ELISP&gt; (dolist (x '(1 2 3))
	 (dolist (y '(a b))
	    (print (list x y))))
(1 a)

(1 b)

(2 a)

(2 b)

(3 a)

(3 b)

nil
ELISP&gt;
</pre>

<p>
<b>Dotimes</b>
</p>
<pre class="example">
ELISP&gt; (dotimes (i 3) (print i))

0

1

2

nil
ELISP

ELISP&gt; (dotimes (i 3) (print (* 2 i)))

0

2

4

nil
ELISP&gt;
</pre>

<p>
<b>Loop</b>
</p>

<p>
最好使用 <code>map</code> 和 <code>filter</code> 代替 <code>loops</code> , 详见 Functional Programming
</p>

<pre class="example">
ELISP&gt; (setq a 4)
4

ELISP&gt; (loop
	(setq a (+ a 1))
	(when (&gt; a 7) (return a)))
8

ELISP&gt; a
8
ELISP&gt;

ELISP&gt; (loop
   (setq a (- a 1))
   (when (&lt; a 3) (return)))
nil
ELISP&gt; a
2
ELISP&gt;
</pre>

<p>
<b>Loop Collecting / Summing / For</b>
</p>
<pre class="example">
ELISP&gt; (loop for i from 1 to 10 collecting i)
(1 2 3 4 5 6 7 8 9 10)

ELISP&gt; (loop for i from 1 to 10 collecting (* 3 i))
(3 6 9 12 15 18 21 24 27 30)

ELISP&gt; (loop for x from 1 to 10 summing (expt x 2))
385

ELISP&gt; (loop for x from 1 to 10 collecting (* 2 x))
(2 4 6 8 10 12 14 16 18 20)

ELISP&gt; (loop for x from 1 to 10 summing (* 2 x))
110
ELISP&gt;

ELISP&gt; (apply #'+ '(2 4 6 8 10 12 14 16 18 20))
110

ELISP&gt; (loop for i below 10 collecting i)
(0 1 2 3 4 5 6 7 8 9)

ELISP&gt;  (loop for x in '(1 2 3)
      do (print x) )

1

2

3

nil

(loop
       for x in '(a b c)
       for y in '(1 2 3 4 5 6)
       collect (list x y))
((a 1)
 (b 2)
 (c 3))

ELISP&gt; (loop for (a b) in '((x 1) (y 2) (z 3))
      collect (list b a))
((1 x)
 (2 y)
 (3 z))

ELISP&gt; (loop for i upto 20
      if (oddp i)
	collect i into odds
      else
	collect i into evens
      finally (return (values evens odds)))
((0 2 4 6 8 10 12 14 16 18 20)
 (1 3 5 7 9 11 13 15 17 19))
</pre>

<p>
<b>Do Loop</b>
</p>
<pre class="example">
(do (variable-definition*)
    (end-test-form result-form*)
  statement*)
</pre>

<pre class="example">
(do
   ;; Variables Definitions
   ((i 0 (1+ i)))

   ;; Test form
    ((&gt;= i 4))

  ;; Statement form
  (print i))

0

1

2

3
nil

;; Fibbonaci Computing Loop
;;
(do ((n 0 (1+ n))
     (cur 0 next)
     (next 1 (+ cur next)))
    ((= 10 n) cur))
55
</pre>
</div>
</div>

<div id="outline-container-orgb64cb4d" class="outline-4">
<h4 id="orgb64cb4d"><span class="section-number-4">1.14.5</span> 函数式编程</h4>
<div class="outline-text-4" id="text-1-14-5">
<p>
<a href="https://github.com/magnars/dash.el.git">Dash</a> 是emacs经常使用的函数式编程库。
</p>

<ul class="org-ul">
<li>Map and Filter</li>
</ul>

<p>
<b>Mapcar / Equivalent to map</b>
</p>
<pre class="example">
ELISP&gt; (defun my-fun (x) (* x 10))
my-fun
ELISP&gt;

ELISP&gt; (mapcar 'my-fun '(1 2 3 5 6))
(10 20 30 50 60)

ELISP&gt; (mapcar 'capitalize '("hello" "world" "emacs"))
("Hello" "World" "Emacs")

;;  Anonymous Functions
;;
ELISP&gt; (mapcar (lambda (x) (* x x))   '(1 2 3 4 5 6))
(1 4 9 16 25 36)


ELISP&gt; (setq anon (lambda (x) (* x x)))
(lambda
  (x)
  (* x x))

ELISP&gt; (mapcar anon '(1 2 3 4 5 6))
(1 4 9 16 25 36)
</pre>

<p>
<b>Filter</b>
</p>
<pre class="example">
ELISP&gt; (null nil)
t
ELISP&gt; (null 23)
nil
ELISP&gt;

;; Equivalent to  Haskell idiom:
;;
;; &gt; filter predicate list
;;
ELISP&gt; (remove-if-not 'null '(1 2 3 nil 5 6 nil nil ))
(nil nil nil)

;; Equivalent to Haskell idiom:
;;
;;   &gt; filter (\x -&gt; not (predicate x)) list
;;
;; a more apropriate name would be reject
;;
ELISP&gt; (remove-if 'null '(1 2 3 nil 5 6 nil nil ))
(1 2 3 5 6)



ELISP&gt; (defun range (step start stop)
  (if (&gt; start stop)
      nil
      (cons start (range step (+ step start) stop))

  );; End If
);; End range

ELISP&gt; (range 1 0 10)
(0 1 2 3 4 5 6 7 8 9 10)

ELISP&gt; (range 2 0 20)
(0 2 4 6 8 10 12 14 16 18 20)


ELISP&gt; (remove-if (lambda (x) (= (% x 2) 0)) (range 1 0 20))
(1 3 5 7 9 11 13 15 17 19)

ELISP&gt; (remove-if-not (lambda (x) (= (% x 2) 0)) (range 1 0 20))
(0 2 4 6 8 10 12 14 16 18 20)


ELISP&gt; (remove-if (lambda (x) (= (% x 3) 0)) (range 1 0 20))
(1 2 4 5 7 8 10 11 13 14 16 17 19 20)

ELISP&gt; (remove-if-not (lambda (x) (= (% x 3) 0)) (range 1 0 20))
(0 3 6 9 12 15 18)

ELISP&gt;
</pre>

<ul class="org-ul">
<li>匿名函数/lambda函数</li>
</ul>
<pre class="example">
ELISP&gt; (lambda (x)(* x 10))
(lambda
  (x)
  (* x 10))

ELISP&gt;

ELISP&gt; (funcall (lambda (x)(* x 10)) 5)
50
ELISP&gt;

ELISP&gt; (setq my-lambda (lambda (x) (+ (* x 10) 5))) ;; 10 * x + 5
(lambda
  (x)
  (+
   (* x 10)
   5))

ELISP&gt; (funcall my-lambda 10)
105
ELISP&gt; (mapcar my-lambda '(1 2 3 4 5))
(15 25 35 45 55)


ELISP&gt;  (setq double (function (lambda (x) (+ x x)) ))
(lambda
  (x)
  (+ x x))

ELISP&gt; (funcall double 22)
44
ELISP&gt;


;;
;; Apply a function to a list of arguments
;;
;;;;;;;;;;;

ELISP&gt; (apply #'+ '(1 2 3 4 5))
15
ELISP&gt;

ELISP&gt;
ELISP&gt; (defun f (x y z) (+ (* 10 x) (* -4 y) (* 5 z)))
f
ELISP&gt; (f 2 3 5)
33

ELISP&gt; (apply 'f '(2 3 5))
33


ELISP&gt; (mapcar (lambda (x) (apply 'f x)) '( (2 3 5) (4 5 6) (8 9 5)))
(33 50 69)



;; Create Higher Order Functions
;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
</pre>

<ul class="org-ul">
<li>Function Composition ????</li>
</ul>
<pre class="example">
ELISP&gt; ;; ID: f0c736a9-afec-3e3f-455c-40997023e130
(defun compose (&amp;rest funs)
  "Return function composed of FUNS."
  (lexical-let ((lex-funs funs))
    (lambda (&amp;rest args)
      (reduce 'funcall (butlast lex-funs)
	      :from-end t
	      :initial-value (apply (car (last lex-funs)) args)))))
	      compose

ELISP&gt; (funcall (compose 'prin1-to-string 'random* 'exp) 10)
"4757.245739507558"
ELISP&gt;
</pre>

<ul class="org-ul">
<li>Interactive Functions</li>
</ul>
<pre class="example">
(defun some-interactive-function ()
   "Documentation"
  (interactive)
  ...)
</pre>

<ul class="org-ul">
<li>List Recursive Functions</li>
</ul>
<p>
<b>Map</b>
</p>
<pre class="example">
(defun map (fun xs)
  (if (null xs)
      '()
    (cons (funcall fun (car xs))
      (map fun (cdr xs)))))

ELISP&gt; (map #'buffer-name (buffer-list))
("*ielm*" "*scratch*" " *Minibuf-1*" "*Backtrace*" "*eshell*" "sclj.import.scm" "*Messages*" "*GNU Emacs*" " *Minibuf-0*" " *code-conversion-work*" " *Echo Area 0*" " *Echo Area 1*" "*Shell Command Output*" "*Completions*")

ELISP&gt;
</pre>

<p>
<b>Filter</b>
</p>
<pre class="example">
(defun filter (fun xs)
  (if (null xs)
      '()
    (let ((hd (car xs))
      (tl (cdr xs)))
      (if (funcall fun hd)
      (cons hd (filter fun tl))
    (filter fun tl)))))

(defun odd? (x) (zerop (% x 2)))

ELISP&gt; (filter #'odd? '(1 2 3 4 5 6))
(2 4 6)
</pre>

<p>
<b>Take</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">take</span> (n xs)
  (<span style="color: #a020f0;">if</span> (<span style="color: #a020f0;">or</span> (null xs) (zerop n))
      '()
    (cons (car xs)
          (take (- n 1) (cdr xs)))))


ELISP&gt; (take 5 '(a b c d e f g h i j))
(a b c d e)

ELISP&gt; (take 10 '(a b c d e f g h i j))
(a b c d e f g h i j)

ELISP&gt; (take 200 '(a b c d e f g h i j))
(a b c d e f g h i j)

ELISP&gt; (take 0 '(a b c d e f g h i j))
nil
ELISP&gt; (take 10 '())
nil
ELISP&gt;
</code></pre>
</div>

<p>
<b>Drop</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">drop</span> (n xs)
  (<span style="color: #a020f0;">if</span> (<span style="color: #a020f0;">or</span> (null xs) (zerop n))
      xs
    (drop (- n 1)  (cdr xs))))

ELISP&gt; (drop 3 '(a b c d e f g h i j))
(d e f g h i j)

ELISP&gt; (drop 4 '(a b c d e f g h i j))
(e f g h i j)

ELISP&gt; (drop 25 '(a b c d e f g h i j))
nil
ELISP&gt;
</code></pre>
</div>

<p>
<b>Map-apply</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">map-apply</span> (fun xss)
  (mapcar (<span style="color: #a020f0;">lambda</span> (xs) (apply fun xs)) xss))

ELISP&gt; (map-apply #'fxyz '((1 2 3) (3 4 5) (2 3 1)))
(17 35 20)

ELISP&gt; (fxyz 1 2 3)
17
ELISP&gt; (fxyz 3 4 5)
35
ELISP&gt; (fxyz 2 3 1)
20
ELISP&gt;
</code></pre>
</div>

<p>
<b>Zip</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">zip</span> (<span style="color: #228b22;">&amp;rest</span> xss)
  (<span style="color: #a020f0;">if</span> (null (car xss))
      '()
    (cons
     (mapcar #'car xss)
     (apply #'zip (mapcar #'cdr xss)))))

ELISP&gt; (zip (list 1 2 3 4) '(a b c d) '(x y z w))
((1 a x)
 (2 b y)
 (3 c z)
 (4 d w))
</code></pre>
</div>

<p>
<b>Zipwith</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">zipwith</span> (f <span style="color: #228b22;">&amp;rest</span> xss)
  (map-apply f (apply #'zip xss)))

ELISP&gt; (zipwith #'f '(1 2 3) '(4 5 6) '(3 6 8))
(23 40 53)

ELISP&gt; (f 1 4 3)
23

ELISP&gt; (f 2 5 6)
40

ELISP&gt; (f 3 6 8)
53
ELISP&gt;
</code></pre>
</div>

<p>
<b>Foldr</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp"><span style="color: #b22222;">;;           </span><span style="color: #b22222;">f :: x -&gt; acc -&gt; acc</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">foldr :: (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">foldr :: (x -&gt; acc -&gt; acc) -&gt; acc -&gt; [x] -&gt; acc</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">foldr f z []     = z</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">foldr f z (x:xs) = f x (foldr f z xs)</span>
<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;;  </span><span style="color: #b22222;">x = (car xss) , xs = (cdr xss)</span>
(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">foldr</span> (f acc xss)
  (<span style="color: #a020f0;">if</span> (null xss)
      <span style="color: #b22222;">;; </span><span style="color: #b22222;">foldr f z []     = z</span>
      acc
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">foldr f z (x:xs) = f x (foldr f z xs)</span>
    (funcall f (car xss)
             (foldr f acc (cdr xss)))))

ELISP&gt; (foldr (<span style="color: #a020f0;">lambda</span> (a b) (+ (* 10 b) a)) 0 '(1 2 3 4 5))
54321
ELISP&gt;

ELISP&gt; (foldr #'+ 0 '(1 2 3 4 5))
15
ELISP&gt;
</code></pre>
</div>

<p>
<b>Foldl</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">foldl :: (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">foldl f z []     = z</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">foldl f z (x:xs) = foldl f (f z x) xs</span>
(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">foldl</span> (f acc xss)
  (<span style="color: #a020f0;">if</span> (null xss)
      acc
    (foldl f (funcall f acc (car xss)) (cdr xss))))

ELISP&gt; (foldl (<span style="color: #a020f0;">lambda</span> (a b) (+ (* 10 a) b)) 0 '(1 2 3 4 5))
12345
ELISP&gt;
</code></pre>
</div>

<p>
<b>Map Pairs</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">map-pair</span> (func xs)
  (mapcar (<span style="color: #a020f0;">lambda</span> (x) (cons x (funcall func x))) xs))

ELISP&gt; (map-pair #'1+ '(1 2 3 4))
((1 . 2)
 (2 . 3)
 (3 . 4)
 (4 . 5))

ELISP&gt; (map-pair #'log10 '(1 10 100 1000 10000))
((1 . 0.0)
 (10 . 1.0)
 (100 . 2.0)
 (1000 . 3.0)
 (10000 . 4.0))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">buffer-mode</span> (buffer-or-string)
  <span style="color: #8b2252;">"Returns the major mode associated with a buffer."</span>
  (<span style="color: #a020f0;">with-current-buffer</span> buffer-or-string
    major-mode))

ELISP&gt; (map-pair #'buffer-mode (buffer-list))
((#&lt;buffer *ielm*&gt; . inferior-emacs-lisp-mode)
 (#&lt;buffer *scratch*&gt; . lisp-interaction-mode)
 (#&lt;buffer *Backtrace*&gt; . debugger-mode)
 (#&lt;buffer *GNU Emacs*&gt; . fundamental-mode)
 (#&lt;buffer  *Minibuf-1*&gt; . minibuffer-inactive-mode)
 (#&lt;buffer  *Minibuf-0*&gt; . minibuffer-inactive-mode)
 (#&lt;buffer *Messages*&gt; . messages-buffer-mode)
</code></pre>
</div>

<p>
<b>Map pairs xy</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">map-xypair</span> (func-x func-y xs)
  (mapcar
   (<span style="color: #a020f0;">lambda</span> (x)
     (cons (funcall func-x x) (funcall func-y x)))
   xs))

ELISP&gt; (map-xypair #'buffer-name #'buffer-mode (buffer-list))
((<span style="color: #8b2252;">"*ielm*"</span> . inferior-emacs-lisp-mode)
 (<span style="color: #8b2252;">"*scratch*"</span> . lisp-interaction-mode)
 (<span style="color: #8b2252;">"*Backtrace*"</span> . debugger-mode)
 (<span style="color: #8b2252;">"*GNU Emacs*"</span> . fundamental-mode)
 (<span style="color: #8b2252;">" *Minibuf-1*"</span> . minibuffer-inactive-mode)
 (<span style="color: #8b2252;">" *Minibuf-0*"</span> . minibuffer-inactive-mode)
 (<span style="color: #8b2252;">"*Messages*"</span> . messages-buffer-mode)
 (<span style="color: #8b2252;">" *code-conversion-work*"</span> . fundamental-mode)
 (<span style="color: #8b2252;">" *Echo Area 0*"</span> . fundamental-mode)
 (<span style="color: #8b2252;">" *Echo Area 1*"</span> . fundamental-mode)
 (<span style="color: #8b2252;">" *http www.httpbin.org:80*"</span> . fundamental-mode)
 (<span style="color: #8b2252;">" *http www.httpbin.org:80*-820734"</span> . fundamental-mode)
 (<span style="color: #8b2252;">" *http www.httpbin.org:80*-914099"</span> . fundamental-mode)
 (<span style="color: #8b2252;">" *http www.httpbin.org:80*-945998"</span> . fundamental-mode)
 (<span style="color: #8b2252;">"*Help*"</span> . help-mode)
 (<span style="color: #8b2252;">"*Completions*"</span> . completion-list-mode))
</code></pre>
</div>

<p>
<b>Juxt</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">ELISP&gt; (juxt #'buffer-name #'buffer-mode)
(<span style="color: #a020f0;">lambda</span>
  (x)
  (list
   ((funcall #'buffer-name x)
    (funcall #'buffer-mode x))))


ELISP&gt; (funcall (juxt #'buffer-file-name  #'buffer-name #'buffer-mode) (current-buffer))
(nil <span style="color: #8b2252;">"*ielm*"</span> inferior-emacs-lisp-mode)

ELISP&gt; (mapcar (juxt #'buffer-name #'buffer-file-name #'buffer-mode) (buffer-list))
((<span style="color: #8b2252;">"*ielm*"</span> nil inferior-emacs-lisp-mode)
 (<span style="color: #8b2252;">"*scratch*"</span> nil lisp-interaction-mode)
 (<span style="color: #8b2252;">"passgen.py"</span> <span style="color: #8b2252;">"/home/tux/bin/passgen.py"</span> python-mode)
 (<span style="color: #8b2252;">".bashrc"</span> <span style="color: #8b2252;">"/home/tux/.bashrc"</span> sh-mode)
 (<span style="color: #8b2252;">" *Minibuf-1*"</span> nil minibuffer-inactive-mode)
 (<span style="color: #8b2252;">"init.el"</span> <span style="color: #8b2252;">"/home/tux/.emacs.d/init.el"</span> emacs-lisp-mode)
 (<span style="color: #8b2252;">"*Backtrace*"</span> nil debugger-mode)
 (<span style="color: #8b2252;">"*GNU Emacs*"</span> nil fundamental-mode)
 (<span style="color: #8b2252;">" *Minibuf-0*"</span> nil minibuffer-inactive-mode)
 (<span style="color: #8b2252;">"*Messages*"</span> nil messages-buffer-mode)
 (<span style="color: #8b2252;">" *code-conversion-work*"</span> nil fundamental-mode)
 (<span style="color: #8b2252;">" *Echo Area 0*"</span> nil fundamental-mode)
 (<span style="color: #8b2252;">" *Echo Area 1*"</span> nil fundamental-mode)
 (<span style="color: #8b2252;">" *http www.httpbin.org:80*"</span> nil fundamental-mode)
 (<span style="color: #8b2252;">" *http www.httpbin.org:80*-820734"</span> nil fundamental-mode)
 (<span style="color: #8b2252;">" *http www.httpbin.org:80*-914099"</span> nil fundamental-mode)
 (<span style="color: #8b2252;">" *http www.httpbin.org:80*-945998"</span> nil fundamental-mode)
 (<span style="color: #8b2252;">"*Help*"</span> nil help-mode)
 (<span style="color: #8b2252;">"*Completions*"</span> nil completion-list-mode))
</code></pre>
</div>

<p>
<b>Map Juxt</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defmacro</span> <span style="color: #0000ff;">map-juxt</span> (xs_f xs)
  `(mapcar (juxt ,@xs_f) ,xs))


ELISP&gt; (map-juxt (#'buffer-name #'buffer-file-name #'buffer-mode) (buffer-list))
((<span style="color: #8b2252;">"*ielm*"</span> nil inferior-emacs-lisp-mode)
 (<span style="color: #8b2252;">"*scratch*"</span> nil lisp-interaction-mode)
 (<span style="color: #8b2252;">"passgen.py"</span> <span style="color: #8b2252;">"/home/tux/bin/passgen.py"</span> python-mode)
 (<span style="color: #8b2252;">".bashrc"</span> <span style="color: #8b2252;">"/home/tux/.bashrc"</span> sh-mode)
 (<span style="color: #8b2252;">" *Minibuf-1*"</span> nil minibuffer-inactive-mode)
 (<span style="color: #8b2252;">"init.el"</span> <span style="color: #8b2252;">"/home/tux/.emacs.d/init.el"</span> emacs-lisp-mode)
 (<span style="color: #8b2252;">"*Backtrace*"</span> nil debugger-mode)
 (<span style="color: #8b2252;">"*GNU Emacs*"</span> nil fundamental-mode)
 (<span style="color: #8b2252;">" *Minibuf-0*"</span> nil minibuffer-inactive-mode)
 (<span style="color: #8b2252;">"*Messages*"</span> nil messages-buffer-mode)
 ...
</code></pre>
</div>

<p>
<b>Lambda Function Macro</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defmacro</span> <span style="color: #0000ff;">$f</span> (f <span style="color: #228b22;">&amp;rest</span> params)
  `(<span style="color: #a020f0;">lambda</span> ($) (,f ,@params)))


ELISP&gt; ($f - 10 $)
(<span style="color: #a020f0;">lambda</span>
  ($)
  (- 10 $))

ELISP&gt; ($f * (+ 3 $) 5)
(<span style="color: #a020f0;">lambda</span>
  ($)
  (*
   (+ 3 $)
   5))

ELISP&gt; (funcall ($f * (+ 3 $) 5) 10)
65
ELISP&gt; (mapcar  ($f * (+ 3 $) 5) '(1 2 3 4 5))
(20 25 30 35 40)

ELISP&gt;
ELISP&gt; (mapcar  ($f list (1+ $) (1- $) (log10 $)) '(1 10 100 1000))
((2 0 0.0)
 (11 9 1.0)
 (101 99 2.0)
 (1001 999 3.0))
</code></pre>
</div>

<p>
<b>Partial Application</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defmacro</span> <span style="color: #0000ff;">$c</span> (f  <span style="color: #228b22;">&amp;rest</span> params)
  `(<span style="color: #a020f0;">lambda</span> (__x) (,f ,@params __x)))

ELISP&gt; (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">f</span> (x y z) (+ (* 3 x) (* 2 y) (* 4 z)))
f
ELISP&gt; (f 1 2 3)
19
ELISP&gt; ($c f 1 2)
(<span style="color: #a020f0;">lambda</span>
  (__x)
  (f 1 2 __x))

ELISP&gt; (mapcar ($c f 1 2) '(1 2 3 4 5))
(11 15 19 23 27)

ELISP&gt; (mapcar ($c + 1 2) '(1 2 3 4 5))
(4 5 6 7 8)

ELISP&gt;
</code></pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4701d2b" class="outline-3">
<h3 id="org4701d2b"><span class="section-number-3">1.15</span> Structures</h3>
<div class="outline-text-3" id="text-1-15">
<div class="col-auto">
<pre><code class="emacs-lisp">ELISP&gt; (<span style="color: #a020f0;">defstruct</span> account id name balance)
account
ELISP&gt; (make-account <span style="color: #483d8b;">:id</span> 3434 <span style="color: #483d8b;">:name</span> <span style="color: #8b2252;">"John"</span> <span style="color: #483d8b;">:balance</span> 1000.34)
[cl-struct-account 3434 <span style="color: #8b2252;">"John"</span> 1000.34]

ELISP&gt; (<span style="color: #a020f0;">setq</span> user1 (make-account <span style="color: #483d8b;">:id</span> 3434 <span style="color: #483d8b;">:name</span> <span style="color: #8b2252;">"John"</span> <span style="color: #483d8b;">:balance</span> 1000.34))
[cl-struct-account 3434 <span style="color: #8b2252;">"John"</span> 1000.34]

ELISP&gt; (account-name user1)
<span style="color: #8b2252;">"John"</span>

ELISP&gt; (account-id user1)
3434

ELISP&gt; (account-balance user1)
1000.34

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Test if input is an account object</span>
<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
ELISP&gt; (account-p user1)
t
ELISP&gt;

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Change Field</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

ELISP&gt; (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">withdraw</span> (accc amount)
         (<span style="color: #a020f0;">setf</span> (account-balance acc) (- (account-balance acc) amount)))
withdraw

ELISP&gt; (withdraw user1 300)
700.34
ELISP&gt; user1
[cl-struct-account 3434 <span style="color: #8b2252;">"John"</span> 700.34]

ELISP&gt; (withdraw user1 500)
200.34000000000003
ELISP&gt; user1
[cl-struct-account 3434 <span style="color: #8b2252;">"John"</span> 200.34000000000003]

ELISP&gt;

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Build structure from a list of parameters</span>
<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

ELISP&gt; (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">build-account</span> (id name balance)
         (make-account <span style="color: #483d8b;">:id</span> id <span style="color: #483d8b;">:name</span> name  <span style="color: #483d8b;">:balance</span> balance))
build-account

ELISP&gt; (build-account 3434 <span style="color: #8b2252;">"O' Neil"</span> 35434.23)
[cl-struct-account 3434 <span style="color: #8b2252;">"O' Neil"</span> 35434.23]

ELISP&gt; (apply 'build-account '(3434 <span style="color: #8b2252;">"O' Neil"</span> 35434.23))
[cl-struct-account 3434 <span style="color: #8b2252;">"O' Neil"</span> 35434.23]

ELISP&gt;

ELISP&gt; (mapcar (<span style="color: #a020f0;">lambda</span> (params) (apply 'build-account params))
               '(
                 (34423 <span style="color: #8b2252;">"O' Neil"</span> 23.2323)
                 (1023  <span style="color: #8b2252;">"John Edwards"</span> 1002323.23)
                 (92323 <span style="color: #8b2252;">"Mr. Dummy"</span>  2323241.2323)
                 (8723  <span style="color: #8b2252;">"John Oliver"</span> 9823)
                 ))
([cl-struct-account 34423 <span style="color: #8b2252;">"O' Neil"</span> 23.2323]
 [cl-struct-account 1023 <span style="color: #8b2252;">"John Edwards"</span> 1002323.23]
 [cl-struct-account 92323 <span style="color: #8b2252;">"Mr. Dummy"</span> 2323241.2323]
 [cl-struct-account 8723 <span style="color: #8b2252;">"John Oliver"</span> 9823])

ELISP&gt;

ELISP&gt; (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">build-accounts-from-list</span> (list-of-params)
         (mapcar (<span style="color: #a020f0;">lambda</span> (params) (apply 'build-account params)) list-of-params))
build-accounts-from-list
ELISP&gt;

ELISP&gt; (<span style="color: #a020f0;">setq</span> accounts (build-accounts-from-list
                       '(
                         (34423 <span style="color: #8b2252;">"O' Neil"</span> 23.2323)
                         (1023  <span style="color: #8b2252;">"John Edwards"</span> 1002323.23)
                         (92323 <span style="color: #8b2252;">"Mr. Dummy"</span>  2323241.2323)
                         (8723  <span style="color: #8b2252;">"John Oliver"</span> 9823)
                         )))
([cl-struct-account 34423 <span style="color: #8b2252;">"O' Neil"</span> 23.2323]
 [cl-struct-account 1023 <span style="color: #8b2252;">"John Edwards"</span> 1002323.23]
 [cl-struct-account 92323 <span style="color: #8b2252;">"Mr. Dummy"</span> 2323241.2323]
 [cl-struct-account 8723 <span style="color: #8b2252;">"John Oliver"</span> 9823])

ELISP&gt; accounts
([cl-struct-account 34423 <span style="color: #8b2252;">"O' Neil"</span> 23.2323]
 [cl-struct-account 1023 <span style="color: #8b2252;">"John Edwards"</span> 1002323.23]
 [cl-struct-account 92323 <span style="color: #8b2252;">"Mr. Dummy"</span> 2323241.2323]
 [cl-struct-account 8723 <span style="color: #8b2252;">"John Oliver"</span> 9823])

ELISP&gt; (mapcar #'account-id accounts)
(34423 1023 92323 8723)

ELISP&gt;

ELISP&gt;
ELISP&gt; (mapcar #'account-name accounts)
(<span style="color: #8b2252;">"O' Neil"</span> <span style="color: #8b2252;">"John Edwards"</span> <span style="color: #8b2252;">"Mr. Dummy"</span> <span style="color: #8b2252;">"John Oliver"</span>)

ELISP&gt;


ELISP&gt; (mapcar #'account-balance accounts)
(23.2323 1002323.23 2323241.2323 9823)

ELISP&gt;
</code></pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org591c852" class="outline-2">
<h2 id="org591c852"><span class="section-number-2">2</span> 宏和元编程</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org778998a" class="outline-3">
<h3 id="org778998a"><span class="section-number-3">2.1</span> Quasi-quote</h3>
<div class="outline-text-3" id="text-2-1">
<div class="col-auto">
<pre><code class="emacs-lisp"><span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Quasiquote</span>

&gt; `(<span style="color: #a020f0;">the</span> product of 3 and 4 is ,(* 3 4))
(<span style="color: #a020f0;">the</span> product of 3 and 4 is 12)

&gt; `(<span style="color: #8b2252;">"the product of 3 and 4 is"</span> ,(* 3 4))
(<span style="color: #8b2252;">"the product of 3 and 4 is"</span> 12)

&gt; `(<span style="color: #8b2252;">"the value of (exp 3) is "</span> ,(exp 3) <span style="color: #8b2252;">"the value of (sqrt 100) is"</span> ,(sqrt 100))
(<span style="color: #8b2252;">"the value of (exp 3) is "</span> 20.085536923187668 <span style="color: #8b2252;">"the value of (sqrt 100) is"</span> 10.0)

&gt; `(a ,a b ,b c ,c d ,d)
(a 10 b 20 c my-symbol d <span style="color: #8b2252;">"a string"</span>)

&gt; `((a . ,a) (b . ,b) (c . ,c) (d . ,d))
((a . 10)
 (b . 20)
 (c . my-symbol)
 (d . <span style="color: #8b2252;">"a string"</span>))

&gt; (<span style="color: #a020f0;">setq</span> xs '(sym1 sym2 sym3))
(sym1 sym2 sym3)

&gt; xs
(sym1 sym2 sym3)

&gt; `(xs ,xs)
(xs
 (sym1 sym2 sym3))

&gt; `(xs ,@xs)
(xs sym1 sym2 sym3)

&gt; `(<span style="color: #a020f0;">if</span> (&lt; ,a ,b) ,(+ a 4) ,d)
(<span style="color: #a020f0;">if</span>
    (&lt; 10 20)
    14 <span style="color: #8b2252;">"a string"</span>)

&gt; (eval `(<span style="color: #a020f0;">if</span> (&lt; ,a ,b) ,(+ a 4) ,d))
14
&gt;

&gt; (eval `(<span style="color: #a020f0;">if</span> (&gt; ,a ,b) ,(+ a 4) ,d))
<span style="color: #8b2252;">"a string"</span>

<span style="color: #b22222;">;;</span><span style="color: #b22222;">------------------</span>

&gt; (<span style="color: #a020f0;">setq</span> xlist '(1 2 3 4))
(1 2 3 4)

&gt; (<span style="color: #a020f0;">setq</span> ylist '(a b c d e))
(a b c d e)

&gt; `(xs ,xlist ys ,ylist)
(xs
 (1 2 3 4)
 ys
 (a b c d e))

&gt; `(xs ,@xlist ys ,@ylist)
(xs 1 2 3 4 ys a b c d e)
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org0618ecb" class="outline-3">
<h3 id="org0618ecb"><span class="section-number-3">2.2</span> 宏</h3>
<div class="outline-text-3" id="text-2-2">
<p>
<b>定义lambda函数语法糖:λ</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defmacro</span> <span style="color: #0000ff;">&#955;</span> (args body)
  `(<span style="color: #a020f0;">lambda</span> ,args ,body))

ELISP&gt; (&#955; (x) (+ x 3))
(<span style="color: #a020f0;">lambda</span>
  (x)
  (+ x 3))
ELISP&gt; (mapcar (&#955; (x) (+ x 3)) '(1 2 3 4 5 6))
(4 5 6 7 8 9)
</code></pre>
</div>

<p>
<b>Set variable to nil</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defmacro</span> <span style="color: #0000ff;">nil!</span> (var)
  `(<span style="color: #a020f0;">setq</span> ,var nil))

ELISP&gt; (<span style="color: #a020f0;">setq</span> x 10)
10
ELISP&gt; x
10
ELISP&gt;

ELISP&gt; (nil! x)
nil
ELISP&gt; x
nil
ELISP&gt;

ELISP&gt; (nil! z)
nil
ELISP&gt; z
nil
ELISP&gt;
</code></pre>
</div>

<p>
<b>Create Clojure def, defn and fn special forms</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defmacro</span> <span style="color: #0000ff;">fn</span> (args body)
  `(<span style="color: #a020f0;">lambda</span> ,args ,body))

(<span style="color: #a020f0;">defmacro</span> <span style="color: #0000ff;">def</span> (name value)
  `(<span style="color: #a020f0;">setq</span> ,name ,value))

(<span style="color: #a020f0;">defmacro</span> <span style="color: #0000ff;">defn</span> (name args body)
  `(<span style="color: #a020f0;">defun</span> ,name ,args ,body))

ELISP&gt; (fn (x) (* x x))
(<span style="color: #a020f0;">lambda</span>
  (x)
  (* x x))

ELISP&gt; (mapcar (fn (x) (* x x)) '(1 2 3 4 5))
(1 4 9 16 25)

ELISP&gt; (def x 1000)
1000
ELISP&gt; x
1000
ELISP&gt;

ELISP&gt; (defn f (x y z) (+ (* 3 x) (* -4 y) (* 5 z)))
f
ELISP&gt; (f 4 5 6)
22
ELISP&gt;
</code></pre>
</div>

<p>
&#x2026;&#x2026;
</p>
</div>
</div>
</div>

<div id="outline-container-orgcb3084d" class="outline-2">
<h2 id="orgcb3084d"><span class="section-number-2">3</span> Emacs API</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orga6240ae" class="outline-3">
<h3 id="orga6240ae"><span class="section-number-3">3.1</span> Emacs术语</h3>
<div class="outline-text-3" id="text-3-1">
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Emacs Terminology</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Point</td>
<td class="org-left">Cursor position, number of characters from beggining of the buffer to current cursor position.</td>
</tr>

<tr>
<td class="org-left">Buffer</td>
<td class="org-left">Place where the user edit something. Not all buffers are bound to a file.</td>
</tr>

<tr>
<td class="org-left">Mark</td>
<td class="org-left">Beginning of the selected area.</td>
</tr>

<tr>
<td class="org-left">Region</td>
<td class="org-left">Selected area/ text</td>
</tr>

<tr>
<td class="org-left">Frame</td>
<td class="org-left">The current window of emacs</td>
</tr>

<tr>
<td class="org-left">Windows</td>
<td class="org-left">Each frame can be split in sections that Emacs documentation calls windows</td>
</tr>

<tr>
<td class="org-left">Fill</td>
<td class="org-left">Word Wrap</td>
</tr>

<tr>
<td class="org-left">Yank</td>
<td class="org-left">Copy</td>
</tr>

<tr>
<td class="org-left">Kill Region</td>
<td class="org-left">Cut</td>
</tr>

<tr>
<td class="org-left">Kill Ring</td>
<td class="org-left">Clipboard</td>
</tr>

<tr>
<td class="org-left">Kill Buffer</td>
<td class="org-left">Close Buffer</td>
</tr>

<tr>
<td class="org-left">Mode Line</td>
<td class="org-left">Status Bar</td>
</tr>

<tr>
<td class="org-left">Font Locking</td>
<td class="org-left">Syntax Coloring</td>
</tr>
</tbody>
</table>

<p>
<a href="http://www.blogbyben.com/2011/04/10-concepts-emacs-newbie-should-master.html">Ben's Journal: 11 Concepts The Emacs Newbie Should Master</a>
</p>
</div>
</div>
<div id="outline-container-org6f211f4" class="outline-3">
<h3 id="org6f211f4"><span class="section-number-3">3.2</span> Emacs API</h3>
<div class="outline-text-3" id="text-3-2">
<p>
<b>API对象</b>
</p>
<ul class="org-ul">
<li>Buffer</li>
<li>Temporary Buffer</li>
<li>Modes</li>
<li>Mode Hooks</li>
<li>Mode Map</li>
<li>Window</li>
<li>Frame</li>
<li>Point</li>
<li>Process</li>
<li>Network Process</li>
<li>Minibuffers</li>
</ul>
</div>
</div>

<div id="outline-container-org08dcf8f" class="outline-3">
<h3 id="org08dcf8f"><span class="section-number-3">3.3</span> Buffers</h3>
<div class="outline-text-3" id="text-3-3">
</div>
<div id="outline-container-org91e7131" class="outline-4">
<h4 id="org91e7131"><span class="section-number-4">3.3.1</span> Buffer Attributes</h4>
<div class="outline-text-4" id="text-3-3-1">
<div class="col-auto">
<pre><code class="emacs-lisp">(buffer-list)
(current-buffer)
(mapcar #'buffer-name (buffer-list))
(mapcar #'buffer-file-name (buffer-list))
(kill-buffer <span style="color: #8b2252;">"init.el"</span>)
(get-buffer <span style="color: #8b2252;">"*scratch*"</span>)
</code></pre>
</div>

<p>
<b>列出打开文件</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">opened-files</span> ()
  <span style="color: #8b2252;">"list all opened file in current session"</span>
  (<span style="color: #a020f0;">interactive</span>)
  (remove-if 'null (mapcar 'buffer-file-name (buffer-list))))

(opened-files)
</code></pre>
</div>

<p>
<b>创建新buffer</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp"><span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">This function returns a buffer named  buffer-or-name.</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">The buffer returned does not become the current</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">buffer&#8212;this function does not change which buffer is current.</span>
<span style="color: #b22222;">;;</span>

ELISP&gt; (get-buffer-create <span style="color: #8b2252;">"foobar"</span>)
#&lt;buffer foobar&gt;
ELISP&gt;

<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;;  </span><span style="color: #b22222;">Divide the screen in two windows, and switch to the new buffer</span>
<span style="color: #b22222;">;;  </span><span style="color: #b22222;">window</span>
<span style="color: #b22222;">;;</span>
ELISP&gt; (switch-to-buffer-other-window <span style="color: #8b2252;">"foobar"</span>)
#&lt;buffer foobar&gt;
ELISP&gt;

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Clean Current Buffer</span>
<span style="color: #b22222;">;;</span>
ELISP&gt; (erase-buffer)
nil
ELISP&gt;

<span style="color: #b22222;">;;  </span><span style="color: #b22222;">Edit another buffer and go back to the old buffer</span>
<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

ELISP&gt; (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">within-buffer</span> (name function)
         (<span style="color: #a020f0;">let</span> (curbuff (current-buffer))
           (switch-to-buffer name)
           (funcall function)
           (switch-to-buffer current-buffer)
           ))

ELISP&gt; (within-buffer <span style="color: #8b2252;">"foobar"</span> (<span style="color: #a020f0;">lambda</span> () (insert <span style="color: #8b2252;">"dummy"</span>)))
#&lt;buffer *ielm*&gt;
ELISP&gt;
ELISP&gt; (<span style="color: #a020f0;">lambda</span> (x)(* x 10))
(<span style="color: #a020f0;">lambda</span>
  (x)
  (* x 10))

<span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Translated from: http://d.hatena.ne.jp/rubikitch/20100201/elispsyntax</span>
<span style="color: #b22222;">;;</span>
ELISP&gt; <span style="color: #b22222;">;; </span><span style="color: #b22222;">test-buffer Create a buffer named, to write a variety of content</span>
(<span style="color: #a020f0;">with-current-buffer</span> (get-buffer-create <span style="color: #8b2252;">"test-buffer"</span>)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Empty the contents of the buffer</span>
  (erase-buffer)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">/tmp/foo.txt Make the contents inserted</span>
  (insert-file-contents <span style="color: #8b2252;">"/etc/fstab"</span>)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Insert a string</span>
  (insert <span style="color: #8b2252;">"End\n"</span>)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Write the contents of a buffer to a file</span>
  (write-region (point-min) (point-max) <span style="color: #8b2252;">"/tmp/bar.txt"</span>))
nil
ELISP&gt;
</code></pre>
</div>
</div>
</div>
<div id="outline-container-orgc690698" class="outline-4">
<h4 id="orgc690698"><span class="section-number-4">3.3.2</span> Buffer Mode</h4>
<div class="outline-text-4" id="text-3-3-2">
<p>
<b>Show Buffers Mode</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">ELISP&gt; (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">buffer-mode</span> (buffer-or-string)
         <span style="color: #8b2252;">"Returns the major mode associated with a buffer."</span>
         (<span style="color: #a020f0;">with-current-buffer</span> buffer-or-string
           major-mode))
buffer-mode

ELISP&gt; (mapcar (<span style="color: #a020f0;">lambda</span> (b)(
                           let
                           (
                            (name (buffer-name b))
                            (type   (buffer-mode (buffer-name b)))
                            )
                           (list name type)
                           ))
               (buffer-list))
((<span style="color: #8b2252;">"*ielm*"</span> inferior-emacs-lisp-mode)
 (<span style="color: #8b2252;">"*SPEEDBAR*"</span> speedbar-mode)
 (<span style="color: #8b2252;">" *Minibuf-1*"</span> minibuffer-inactive-mode)
 (<span style="color: #8b2252;">"*scratch*"</span> emacs-lisp-mode)
 (<span style="color: #8b2252;">"test3.ml"</span> tuareg-mode)
 (<span style="color: #8b2252;">"*Help*"</span> help-mode)
 (<span style="color: #8b2252;">"*Messages*"</span> messages-buffer-mode)
 (<span style="color: #8b2252;">"sbet.ml"</span> tuareg-mode)
 (<span style="color: #8b2252;">" *Minibuf-0*"</span> minibuffer-inactive-mode)
 (<span style="color: #8b2252;">"test.el"</span> emacs-lisp-mode)
 ...
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org652f332" class="outline-4">
<h4 id="org652f332"><span class="section-number-4">3.3.3</span> Get Buffer Contents / Selection / Line</h4>
<div class="outline-text-4" id="text-3-3-3">
<p>
<b>Get Buffer Content as String</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">ELISP&gt; (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">buffer-content</span> (name)
         (<span style="color: #a020f0;">with-current-buffer</span> name
           (buffer-substring-no-properties (point-min) (point-max))))
buffer-content
ELISP&gt;

ELISP&gt; (buffer-content <span style="color: #8b2252;">"test3.ml"</span>)
<span style="color: #8b2252;">"\n\nlet rec prodlist = function \n    | [] ... "</span>
</code></pre>
</div>

<p>
<b>Get Selected text in current buffer as string</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">get-selection</span> ()
  <span style="color: #8b2252;">"Get the text selected in current buffer as string"</span>
  (<span style="color: #a020f0;">interactive</span>)
  (buffer-substring-no-properties (region-beginning) (region-end))
  )
</code></pre>
</div>

<p>
<b>Get current line in current buffer</b>
</p>

<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">get-current-line</span> ()
  (<span style="color: #a020f0;">interactive</span>)
  <span style="color: #8b2252;">"Get current line, where the cursor lies in the current buffer"</span>
  (replace-regexp-in-string <span style="color: #8b2252;">"[\n|\s\t]+$"</span> <span style="color: #8b2252;">""</span> (thing-at-point 'line t))
  )
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org8162fcc" class="outline-4">
<h4 id="org8162fcc"><span class="section-number-4">3.3.4</span> Search and Replace in the entire Buffer</h4>
<div class="outline-text-4" id="text-3-3-4">
<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">replace-regexp-entire-buffer</span> (pattern replacement)
  <span style="color: #8b2252;">"Perform regular-expression replacement throughout buffer."</span>
  (<span style="color: #a020f0;">interactive</span>
   (<span style="color: #a020f0;">let</span> ((args (query-replace-read-args <span style="color: #8b2252;">"Replace"</span> t)))
     (setcdr (cdr args) nil)    <span style="color: #b22222;">; </span><span style="color: #b22222;">remove third value returned from query---args</span>
     args))
  (<span style="color: #a020f0;">save-excursion</span>
    (goto-char (point-min))
    (<span style="color: #a020f0;">while</span> (re-search-forward pattern nil t)
      (replace-match replacement))))
</code></pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgeae5ae5" class="outline-3">
<h3 id="orgeae5ae5"><span class="section-number-3">3.4</span> Point, Region, Line and Buffer</h3>
<div class="outline-text-3" id="text-3-4">
</div>
<div id="outline-container-orge228e97" class="outline-4">
<h4 id="orge228e97"><span class="section-number-4">3.4.1</span> Point</h4>
<div class="outline-text-4" id="text-3-4-1">
<p>
<b>Point</b>
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Function</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">(point)</td>
<td class="org-left">Current cursor position</td>
</tr>

<tr>
<td class="org-left">(point-min)</td>
<td class="org-left">Minimum cursor position in current buffer. (always returns 1)</td>
</tr>

<tr>
<td class="org-left">(point-max)</td>
<td class="org-left">Maximum cursor position in current buffer.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">(line-beginning-position)</td>
<td class="org-left">Point of the beginning of current line.</td>
</tr>

<tr>
<td class="org-left">(line-end-position)</td>
<td class="org-left">Point of the end of current line.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">(region-beginning)</td>
<td class="org-left">Position of the beginning current region (selected text).</td>
</tr>

<tr>
<td class="org-left">(region-end)</td>
<td class="org-left">Position of the end current region.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">(bounds-of-thing-at-point &lt;thing&gt;)</td>
<td class="org-left">Returns the cons pair '(beginning . end) position of thing at point.</td>
</tr>
</tbody>
</table>

<p>
<b>Point Interface Functions</b>
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Function</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">(goto-char &lt;point&gt;)</td>
<td class="org-left">Move the cursor to a given point.</td>
</tr>

<tr>
<td class="org-left">(insert &lt;string&gt;)</td>
<td class="org-left">Insert text at current point.</td>
</tr>

<tr>
<td class="org-left">(buffer-substring [pmin] [pmax])</td>
<td class="org-left">Returns the text with properties between the points &lt;pmin&gt; and &lt;pmax&gt;.</td>
</tr>

<tr>
<td class="org-left">(buffer-substring-no-properties [pmin] pmax])</td>
<td class="org-left">Returns the text without properties between the points.</td>
</tr>

<tr>
<td class="org-left">(delete-region [pmin] [pmax])</td>
<td class="org-left">Deletes the text between &lt;pmin&gt; and &lt;pmax&gt;.</td>
</tr>
</tbody>
</table>


<div class="col-auto">
<pre><code class="emacs-lisp">&gt; (point)
99696

&gt; (point-min)
1


&gt; (point-max)
185623

&gt;  (line-beginning-position)
99774

&gt;  (line-end-position)
99804

&gt; (buffer-substring-no-properties
   (line-beginning-position)
   (line-end-position))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">delete-line</span> ()
  (<span style="color: #a020f0;">interactive</span>)
  (delete-region  (line-beginning-position)  (line-end-position)))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">delete-region</span> ()
  (<span style="color: #a020f0;">interactive</span>)
  (delete-region  (region-beginning) (region-end)))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">insert-end-of-buffer</span> ()
  (<span style="color: #a020f0;">interactive</span>)

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Save Current Cursor Position</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">and go back to initial positon when</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">finish this block</span>
  (<span style="color: #a020f0;">save-excursion</span>
    (goto-char (point-max)) <span style="color: #b22222;">;;; </span><span style="color: #b22222;">Go to end of buffer</span>
    (insert <span style="color: #8b2252;">"Testing insert end of buffer"</span>)
    ))
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org9710670" class="outline-4">
<h4 id="org9710670"><span class="section-number-4">3.4.2</span> Thing at Point API</h4>
<div class="outline-text-4" id="text-3-4-2">
<p>
???
</p>
</div>
</div>
</div>
<div id="outline-container-org48653a0" class="outline-3">
<h3 id="org48653a0"><span class="section-number-3">3.5</span> Message / Output</h3>
<div class="outline-text-3" id="text-3-5">
<div class="col-auto">
<pre><code class="emacs-lisp">(message <span style="color: #8b2252;">"Hello world"</span>)
(message-box <span style="color: #8b2252;">"Time for a break.\nDrink some coffee"</span>)
</code></pre>
</div>
</div>
</div>
<div id="outline-container-orge4e589f" class="outline-3">
<h3 id="orge4e589f"><span class="section-number-3">3.6</span> Files, Directories and Path</h3>
<div class="outline-text-3" id="text-3-6">
</div>
<div id="outline-container-org96f0e0a" class="outline-4">
<h4 id="org96f0e0a"><span class="section-number-4">3.6.1</span> Basic Functions</h4>
<div class="outline-text-4" id="text-3-6-1">
<div class="col-auto">
<pre><code class="emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Get and Set current directory</span>

ELISP&gt; (pwd)
<span style="color: #8b2252;">"Directory /home/tux/tmp/"</span>

ELISP&gt; (cd <span style="color: #8b2252;">"/etc/"</span>)
<span style="color: #8b2252;">"/etc/"</span>

ELISP&gt; (pwd)
<span style="color: #8b2252;">"Directory /etc/"</span>
ELISP&gt;


ELISP&gt; (file-name-directory <span style="color: #8b2252;">"/etc/hosts"</span>)
<span style="color: #8b2252;">"/etc/"</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Expand File Name</span>
<span style="color: #b22222;">;;</span>
ELISP&gt; (expand-file-name <span style="color: #8b2252;">"~/"</span>)
<span style="color: #8b2252;">"/home/tux/"</span>
ELISP&gt; (expand-file-name <span style="color: #8b2252;">"."</span>)
<span style="color: #8b2252;">"/home/tux/tmp"</span>
ELISP&gt; (expand-file-name <span style="color: #8b2252;">".."</span>)
<span style="color: #8b2252;">"/home/tux"</span>
ELISP&gt;


<span style="color: #b22222;">;;;;; </span><span style="color: #b22222;">Create a Directory</span>
<span style="color: #b22222;">;;;</span>
ELISP&gt; (mkdir <span style="color: #8b2252;">"dummy"</span>)
nil
ELISP&gt; (mkdir <span style="color: #8b2252;">"dummy"</span>)
** Eval error **  File exists: /home/tux/dummy
ELISP&gt;

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">List Directory</span>
<span style="color: #b22222;">;;;;</span>
<span style="color: #b22222;">;;;</span>
ELISP&gt; (directory-files <span style="color: #8b2252;">"/home/tux/PycharmProjects/Haskell/"</span>)
(<span style="color: #8b2252;">"."</span> <span style="color: #8b2252;">".."</span> <span style="color: #8b2252;">".git"</span> <span style="color: #8b2252;">".gitignore"</span> <span style="color: #8b2252;">".idea"</span> <span style="color: #8b2252;">"LICENSE"</span> <span style="color: #8b2252;">"Make"</span> <span style="color: #8b2252;">"Makefile"</span>
 <span style="color: #8b2252;">"README.back.md"</span> <span style="color: #8b2252;">"README.html"</span> <span style="color: #8b2252;">"README.md"</span> <span style="color: #8b2252;">"Test.html"</span> <span style="color: #8b2252;">"build.sh"</span> <span style="color: #8b2252;">"clean.sh"</span>
 <span style="color: #8b2252;">"codes"</span> <span style="color: #8b2252;">"dict.sh"</span> <span style="color: #8b2252;">"haskell"</span> <span style="color: #8b2252;">"ocaml"</span> <span style="color: #8b2252;">"papers"</span> <span style="color: #8b2252;">"tags"</span> <span style="color: #8b2252;">"tmp"</span>)
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org6d611f9" class="outline-4">
<h4 id="org6d611f9"><span class="section-number-4">3.6.2</span> File Name Components</h4>
<div class="outline-text-4" id="text-3-6-2">
<div class="col-auto">
<pre><code class="emacs-lisp">ELISP&gt; (file-name-directory <span style="color: #8b2252;">"/usr/bin/env"</span>)
<span style="color: #8b2252;">"/usr/bin/"</span>
ELISP&gt;

ELISP&gt; (file-name-nondirectory <span style="color: #8b2252;">"/usr/bin/env"</span>)
<span style="color: #8b2252;">"env"</span>
ELISP&gt;


ELISP&gt; (file-name-base <span style="color: #8b2252;">"/home/foo/zoo1.c"</span>)
<span style="color: #8b2252;">"zoo1"</span>
ELISP&gt; (file-name-base <span style="color: #8b2252;">"/home/foo/zoo1.c.back"</span>)
<span style="color: #8b2252;">"zoo1.c"</span>
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org54df10a" class="outline-4">
<h4 id="org54df10a"><span class="section-number-4">3.6.3</span> Read / Write file to a string</h4>
<div class="outline-text-4" id="text-3-6-3">
<p>
<b>Read File</b>
</p>
<div class="col-auto">
<pre><code class="emacs-lisp">ELISP&gt; (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">file-contents</span> (filename)
  (<span style="color: #a020f0;">interactive</span> <span style="color: #8b2252;">"fFind file: "</span>)
  (<span style="color: #a020f0;">with-temp-buffer</span>
    (insert-file-contents filename) <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#20808;&#23558;&#25991;&#20214;&#20869;&#23481;&#25554;&#20837;&#20020;&#26102;buffer&#65292;&#20877;&#35835;&#21462;&#20869;&#23481;</span>
    (buffer-substring-no-properties (point-min) (point-max))))

ELISP&gt; (file-contents <span style="color: #8b2252;">"/proc/filesystems"</span>)
<span style="color: #8b2252;">"nodev  sysfs\nnodev    rootfs\nnodev   ramfs\nnodev</span>
<span style="color: #8b2252;">bdev\nnodev proc\nnodev cgroup\nnode ...</span>
</code></pre>
</div>

<p>
<b>Write to File</b>
</p>
<div class="col-auto">
<pre><code class="emacs-lisp">ELISP&gt; (append-to-file <span style="color: #8b2252;">"hello world"</span> nil <span style="color: #8b2252;">"/tmp/hello.txt"</span>)
nil

ELISP&gt; (file-contents <span style="color: #8b2252;">"/tmp/hello.txt"</span>)
<span style="color: #8b2252;">"hello world"</span>
ELISP&gt;
</code></pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org659172f" class="outline-3">
<h3 id="org659172f"><span class="section-number-3">3.7</span> Window Functions</h3>
<div class="outline-text-3" id="text-3-7">
</div>
<div id="outline-container-org16c7452" class="outline-4">
<h4 id="org16c7452"><span class="section-number-4">3.7.1</span> Basic Window Functions</h4>
<div class="outline-text-4" id="text-3-7-1">
<div class="col-auto">
<pre><code class="emacs-lisp">(split-window-horizontally)
(split-window-vertically)
(delete-other-windows)
(switch-to-buffer-other-window <span style="color: #8b2252;">"init.el"</span>)
(delete-window)
(make-frame)
(frame-list)
(delete-frame)
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org80fe4e8" class="outline-4">
<h4 id="org80fe4e8"><span class="section-number-4">3.7.2</span> Manipulate Buffer in Another Window</h4>
<div class="outline-text-4" id="text-3-7-2">
<p>
<a href="http://caiorss.github.io/Emacs-Elisp-Programming/Elisp_Programming.html#sec-3-9-2">http://caiorss.github.io/Emacs-Elisp-Programming/Elisp_Programming.html#sec-3-9-2</a>
</p>
</div>
</div>
<div id="outline-container-orge84f0c6" class="outline-4">
<h4 id="orge84f0c6"><span class="section-number-4">3.7.3</span> Window Configuration</h4>
<div class="outline-text-4" id="text-3-7-3">
<div class="col-auto">
<pre><code class="emacs-lisp">(current-window-configuration)
(<span style="color: #a020f0;">setq</span> w (current-window-configuration))
w
(set-window-configuration w)
</code></pre>
</div>


<div class="col-auto">
<pre><code class="emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Screen Resolution</span>

ELISP&gt; (x-display-pixel-width)
1366

ELISP&gt; (x-display-pixel-height)
768
ELISP&gt;
ELISP&gt;

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Resize and Set Emacs Windows position</span>
<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">From: http://uce.uniovi.es/tips/Emacs/mydotemacs.html#sec-41</span>
<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

ELISP&gt; (<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">resize-frame</span> ()
  <span style="color: #8b2252;">"Set size"</span>
  (<span style="color: #a020f0;">interactive</span>)
  (set-frame-width (selected-frame) 100)
  (set-frame-height (selected-frame) 28)
  (set-frame-position (selected-frame) 0 1))
resize-frame
ELISP&gt;

ELISP&gt; (resize-frame)
t
ELISP&gt;
</code></pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7435f8c" class="outline-3">
<h3 id="org7435f8c"><span class="section-number-3">3.8</span> OS Interface</h3>
<div class="outline-text-3" id="text-3-8">
</div>
<div id="outline-container-org808e0ee" class="outline-4">
<h4 id="org808e0ee"><span class="section-number-4">3.8.1</span> Find the current operating system</h4>
<div class="outline-text-4" id="text-3-8-1">
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Value</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">gnu</td>
<td class="org-left">GNU Hurd system.</td>
</tr>

<tr>
<td class="org-left">gnu/linux</td>
<td class="org-left">GNU/Linux system.</td>
</tr>

<tr>
<td class="org-left">gnu/kfreebsd</td>
<td class="org-left">GNU system with a FreeBSD kernel.</td>
</tr>

<tr>
<td class="org-left">darwin</td>
<td class="org-left">Darwin (GNU-Darwin, Mac OS X)</td>
</tr>

<tr>
<td class="org-left">ms-dos</td>
<td class="org-left">MS-DOS application.</td>
</tr>

<tr>
<td class="org-left">windows-nt</td>
<td class="org-left">native W32 application.</td>
</tr>

<tr>
<td class="org-left">cygwin</td>
<td class="org-left">compiled using the Cygwin library</td>
</tr>
</tbody>
</table>

<div class="col-auto">
<pre><code class="emacs-lisp">system-type
system-configuration
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org46ba418" class="outline-4">
<h4 id="org46ba418"><span class="section-number-4">3.8.2</span> Date and Time</h4>
<div class="outline-text-4" id="text-3-8-2">
<div class="col-auto">
<pre><code class="emacs-lisp">(current-time)
(insert (format-time-string <span style="color: #8b2252;">"%Y-%m-%d"</span>)) <span style="color: #b22222;">;; </span><span style="color: #b22222;">2019-12-15</span>
(insert (format-time-string <span style="color: #8b2252;">"%H:%M:%S"</span>)) <span style="color: #b22222;">;; </span><span style="color: #b22222;">16:11:04</span>
(format-time-string <span style="color: #8b2252;">"%d/%m/%Y %H:%M:%S"</span> (current-time))
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org9cd0123" class="outline-4">
<h4 id="org9cd0123"><span class="section-number-4">3.8.3</span> Call External Commands or Apps</h4>
<div class="outline-text-4" id="text-3-8-3">
<div class="col-auto">
<pre><code class="emacs-lisp">(call-process <span style="color: #8b2252;">"mpd"</span>)
(shell-command-to-string <span style="color: #8b2252;">"pwd"</span>)
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org75ced38" class="outline-4">
<h4 id="org75ced38"><span class="section-number-4">3.8.4</span> Environment Variables</h4>
<div class="outline-text-4" id="text-3-8-4">
<div class="col-auto">
<pre><code class="emacs-lisp">(getenv <span style="color: #8b2252;">"PATH"</span>)
(split-string (getenv <span style="color: #8b2252;">"PATH"</span>) <span style="color: #8b2252;">":"</span>)
(<span style="color: #a020f0;">dolist</span> (e (split-string  (getenv <span style="color: #8b2252;">"PATH"</span>) <span style="color: #8b2252;">":"</span>)) (princ (format <span style="color: #8b2252;">"%s\n"</span> e)))
exec-path
(getenv <span style="color: #8b2252;">"HOME"</span>)
(setenv <span style="color: #8b2252;">"JAVA_HOME"</span> <span style="color: #8b2252;">"/usr/local/java"</span>)

system-type
(eq system-type 'gnu/linux)()
(<span style="color: #a020f0;">dolist</span> (e process-environment) (princ (format <span style="color: #8b2252;">"%s\n"</span> e)))
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org04ff8fd" class="outline-4">
<h4 id="org04ff8fd"><span class="section-number-4">3.8.5</span> Process Management</h4>
<div class="outline-text-4" id="text-3-8-5">
<div class="col-auto">
<pre><code class="emacs-lisp">(process-list)
(get-process <span style="color: #8b2252;">"merlin"</span>)
(mapcar 'process-name (process-list))

<span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Buffer Process</span>
(process-command (get-process <span style="color: #8b2252;">"vterm"</span>))
(process-id (get-process <span style="color: #8b2252;">"vterm"</span>))
(process-buffer (get-process <span style="color: #8b2252;">"vterm"</span>))
(buffer-name (process-buffer (get-process <span style="color: #8b2252;">"vterm"</span>)))
(mapcar (<span style="color: #a020f0;">lambda</span> (p) (buffer-name (process-buffer p))) (process-list))
(display-buffer (process-buffer (get-process <span style="color: #8b2252;">"vterm"</span>)))

<span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Start Asyncronous Process</span>
<span style="color: #b22222;">;;  </span><span style="color: #b22222;">Start the process named py, with the buffer named pybff</span>
<span style="color: #b22222;">;;  </span><span style="color: #b22222;">using the command python, /usr/bin/python (on linux)</span>
(start-process <span style="color: #8b2252;">"py"</span> <span style="color: #8b2252;">"pybff"</span> <span style="color: #8b2252;">"python"</span>)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">End the process named py</span>
(process-send-eof <span style="color: #8b2252;">"py"</span>)

(process-send-string <span style="color: #8b2252;">"py"</span> <span style="color: #8b2252;">"print 'Hello world'\n"</span>)

<span style="color: #b22222;">;;;; </span><span style="color: #b22222;">Get Multiple Fields</span>

(mapcar
 (<span style="color: #a020f0;">lambda</span> (p)(list
             p
             (process-name p)
             (process-command p)
             (list (process-buffer p) (buffer-name (process-buffer p)))
             (process-id p)
             (process-status p)
             ))
 (process-list))
</code></pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga6d65d2" class="outline-3">
<h3 id="orga6d65d2"><span class="section-number-3">3.9</span> Interfaces</h3>
<div class="outline-text-3" id="text-3-9">
</div>
<div id="outline-container-org137613f" class="outline-4">
<h4 id="org137613f"><span class="section-number-4">3.9.1</span> Creating Quick Access Menu</h4>
<div class="outline-text-4" id="text-3-9-1">
<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">easymenu</span>)

(<span style="color: #a020f0;">easy-menu-define</span> djcb-menu global-map <span style="color: #8b2252;">"Utils"</span>
  '(<span style="color: #8b2252;">"Utils"</span>
    (<span style="color: #8b2252;">"Shells"</span> <span style="color: #b22222;">;; </span><span style="color: #b22222;">submenu</span>
     [<span style="color: #8b2252;">"Ielm   - Emacs Lisp Shell"</span>       (ielm)]
     [<span style="color: #8b2252;">"Eshell - Emacs Buitin Shell"</span>    (eshell)]
     [<span style="color: #8b2252;">"Native Shell "</span>                  (shell)]
     [<span style="color: #8b2252;">"---------------------"</span> nil]
     [<span style="color: #8b2252;">"Edit .bashrc"</span> (find-file  <span style="color: #8b2252;">"~/.bashrc"</span>)]
     [<span style="color: #8b2252;">"Edit .profile"</span> (find-file <span style="color: #8b2252;">"~/.profile"</span>)]
     [<span style="color: #8b2252;">"Edit .Xresources"</span> (find-file <span style="color: #8b2252;">"~/.Xresources"</span>)]
     [<span style="color: #8b2252;">"Edit .xsessin"</span>    (find-file <span style="color: #8b2252;">"~/.xsession"</span>)]
     [<span style="color: #8b2252;">"See all GNU MAN pages"</span> ( info)]
     [<span style="color: #8b2252;">"See a specific Man Page"</span> (woman)]

     )<span style="color: #b22222;">;; </span><span style="color: #b22222;">End of shells menu</span>

    (<span style="color: #8b2252;">"Emacs /Elisp"</span>  <span style="color: #b22222;">;; </span><span style="color: #b22222;">submenu</span>

     [<span style="color: #8b2252;">"Ielm   - Emacs Lisp Shell"</span>  (ielm)]
     [<span style="color: #8b2252;">"Eval buffer"</span>   (eval-buffer) ]
     [<span style="color: #8b2252;">"---------------------"</span> nil]

     [<span style="color: #8b2252;">"Edit  init.el"</span> (find-file  user-init-file)]
     [<span style="color: #8b2252;">"Reload init.el"</span> (load-file user-init-file)]
     [<span style="color: #8b2252;">"Open .emac.d dir"</span> (find-file <span style="color: #8b2252;">"~/.emacs.d"</span>)]
     [<span style="color: #8b2252;">"List packages"</span>     (list-packages)]
     [<span style="color: #8b2252;">"Install package"</span>   (package-install)]

     ) <span style="color: #b22222;">;; </span><span style="color: #b22222;">End of Emacs / Elisp submenu</span>
    )) <span style="color: #b22222;">;; </span><span style="color: #b22222;">End of Custom Menu</span>
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org63903b1" class="outline-4">
<h4 id="org63903b1"><span class="section-number-4">3.9.2</span> Add Icons to toolbar</h4>
<div class="outline-text-4" id="text-3-9-2">
<p>
<a href="http://caiorss.github.io/Emacs-Elisp-Programming/Elisp_Programming.html#sec-3-11-2">http://caiorss.github.io/Emacs-Elisp-Programming/Elisp_Programming.html#sec-3-11-2</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgfcda48f" class="outline-3">
<h3 id="orgfcda48f"><span class="section-number-3">3.10</span> Timer</h3>
<div class="outline-text-3" id="text-3-10">
</div>
<div id="outline-container-orge9dbdb4" class="outline-4">
<h4 id="orge9dbdb4"><span class="section-number-4">3.10.1</span> run-with-timer</h4>
<div class="outline-text-4" id="text-3-10-1">
<div class="col-auto">
<pre><code class="emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">(run-with-timer SECS REPEAT FUNCTION &amp;rest ARGS)</span>
(run-with-timer 5 nil
                (<span style="color: #a020f0;">lambda</span> () (message-box <span style="color: #8b2252;">"happy hacking emacs!"</span>)))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">cofee-wait</span> ()
  (<span style="color: #a020f0;">interactive</span>)
  (<span style="color: #a020f0;">let</span> ((minutes 3))
    (run-with-timer (* 60 minutes)  nil
                    (<span style="color: #a020f0;">lambda</span> () (message-box <span style="color: #8b2252;">"Coffee done"</span>))
                    )
    (message <span style="color: #8b2252;">"Waiting for the cofee"</span>)
    ))
</code></pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orga64d6d2" class="outline-3">
<h3 id="orga64d6d2"><span class="section-number-3">3.11</span> Emacs Modes</h3>
<div class="outline-text-3" id="text-3-11">
</div>
<div id="outline-container-org367555f" class="outline-4">
<h4 id="org367555f"><span class="section-number-4">3.11.1</span> Mode Association with Files</h4>
<div class="outline-text-4" id="text-3-11-1">
<div class="col-auto">
<pre><code class="emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">&#21015;&#20986;&#25152;&#26377;&#21644;&#25299;&#23637;&#21517;&#30456;&#20851;&#30340;mode</span>
auto-mode-alist
<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#21015;&#20986;&#19982;&#19968;&#20010;mode&#30456;&#20851;&#30340;&#25152;&#26377;&#25299;&#23637;&#21517;</span>
(remove-if-not
 (<span style="color: #a020f0;">lambda</span> (al) (equal (cdr al) 'web-mode)) auto-mode-alist)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">&#20026;&#19968;&#20010;mode&#20851;&#32852;&#25299;&#23637;&#21517;</span>
(add-to-list 'auto-mode-alist '(<span style="color: #8b2252;">"\\.markdown\\'"</span> . markdown-mode))
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org8632525" class="outline-4">
<h4 id="org8632525"><span class="section-number-4">3.11.2</span> Lisp Routines to introspect modes??</h4>
<div class="outline-text-4" id="text-3-11-2">
<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">show-doc</span> (<span style="color: #a020f0;">function</span>)
  (princ (documentation function)))

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">mode/show</span> ()
  <span style="color: #8b2252;">"  Returns all modes associated with files</span>

<span style="color: #8b2252;">     To query the file extesions associated with a mode</span>
<span style="color: #8b2252;">     use:</span>
<span style="color: #8b2252;">         &gt; (mode/ftypes 'markdown-mode)</span>

<span style="color: #8b2252;">     for example.</span>
<span style="color: #8b2252;">  "</span>
  (<span style="color: #a020f0;">dolist</span> (m (remove-if #'listp
                        (mapcar #'cdr auto-mode-alist))) <span style="color: #ff0000; font-weight: bold;">(print m)))</span>

(<span style="color: #a020f0;">defun</span> <span style="color: #0000ff;">mode/ftypes</span> (mode)
  <span style="color: #8b2252;">"</span>
<span style="color: #8b2252;">  Get all file extension associated with a mode.</span>

<span style="color: #8b2252;">  Usage:</span>

<span style="color: #8b2252;">  ELISP&gt; (get-mode-ftypes 'markdown-mode)</span>
<span style="color: #8b2252;">  ((\"\\.md\\'\" . markdown-mode)</span>
<span style="color: #8b2252;">  (\"\\.text\\'\" . markdown-mode)</span>
<span style="color: #8b2252;">  (\"\\.markdown\\'\" . markdown-mode)</span>

<span style="color: #8b2252;">  "</span>
  (remove-if-not
   (<span style="color: #a020f0;">lambda</span> (al)
     (equal (cdr al) mode))
   auto-mode-alist))

ELISP&gt; (mode/ftypes 'clojure-mode)
((<span style="color: #8b2252;">"</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">(?:</span><span style="color: #8b2252;">build</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">profile</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">)</span><span style="color: #8b2252;">\\.boot\\'"</span> . clojure-mode)
 (<span style="color: #8b2252;">"\\.</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">(</span><span style="color: #8b2252;">clj</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">dtm</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">edn</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">)</span><span style="color: #8b2252;">\\'"</span> . clojure-mode))

ELISP&gt; (mode/ftypes 'scheme-mode)
((<span style="color: #8b2252;">"\\.</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">(</span><span style="color: #8b2252;">scm</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">stk</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">ss</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">sch</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">)</span><span style="color: #8b2252;">\\'"</span> . scheme-mode)
 (<span style="color: #8b2252;">"\\.scm\\.[0-9]*\\'"</span> . scheme-mode)
 (<span style="color: #8b2252;">"\\.oak\\'"</span> . scheme-mode))

ELISP&gt; (show-doc #'mode/ftypes)

Get all file extension associated with a mode.

Usage:

ELISP&gt; (get-mode-ftypes 'markdown-mode)
((<span style="color: #8b2252;">"</span><span style="color: #ff0000; font-weight: bold;">\</span><span style="color: #8b2252;">.md</span><span style="color: #ff0000; font-weight: bold;">\</span><span style="color: #8b2252;">'"</span> . markdown-mode)
 (<span style="color: #8b2252;">"</span><span style="color: #ff0000; font-weight: bold;">\</span><span style="color: #8b2252;">.text</span><span style="color: #ff0000; font-weight: bold;">\</span><span style="color: #8b2252;">'"</span> . markdown-mode)
 (<span style="color: #8b2252;">"</span><span style="color: #ff0000; font-weight: bold;">\</span><span style="color: #8b2252;">.markdown</span><span style="color: #ff0000; font-weight: bold;">\</span><span style="color: #8b2252;">'"</span> . markdown-mode))
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org042ee2b" class="outline-4">
<h4 id="org042ee2b"><span class="section-number-4">3.11.3</span> Mode Specific Key Bindings</h4>
<div class="outline-text-4" id="text-3-11-3">
<div class="col-auto">
<pre><code class="emacs-lisp">(define-key emacs-lisp-mode-map (kbd <span style="color: #8b2252;">"&lt;f5&gt;"</span>)
  (<span style="color: #a020f0;">lambda</span> () (<span style="color: #a020f0;">interactive</span>) (message <span style="color: #8b2252;">"Hello world"</span>)))
(add-hook 'lisp-interaction-mode-hook 'turn-on-eldoc-mode)
</code></pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org880db61" class="outline-3">
<h3 id="org880db61"><span class="section-number-3">3.12</span> Special Variables</h3>
<div class="outline-text-3" id="text-3-12">
<div class="col-auto">
<pre><code class="emacs-lisp">emacs-major-version
load-path
window-system
system-type
system-configuration
shell-file-name
user-full-name
user-mail-address
user-init-file
user-emacs-directory
exec-directory
</code></pre>
</div>
</div>
</div>

<div id="outline-container-org37d33f5" class="outline-3">
<h3 id="org37d33f5"><span class="section-number-3">3.13</span> Network</h3>
<div class="outline-text-3" id="text-3-13">
<p>
<a href="http://caiorss.github.io/Emacs-Elisp-Programming/Elisp_Programming.html#sec-3-15">http://caiorss.github.io/Emacs-Elisp-Programming/Elisp_Programming.html#sec-3-15</a>
</p>
</div>
</div>
</div>

<div id="outline-container-org6679bbc" class="outline-2">
<h2 id="org6679bbc"><span class="section-number-2">4</span> 正则表达式</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org1ac748d" class="outline-3">
<h3 id="org1ac748d"><span class="section-number-3">4.1</span> Emacs Regex</h3>
<div class="outline-text-3" id="text-4-1">
<p>
<b>Special characters</b>
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">.</td>
<td class="org-left">any character (but newline)</td>
</tr>

<tr>
<td class="org-left">*</td>
<td class="org-left">previous character or group, repeated 0 or more time</td>
</tr>

<tr>
<td class="org-left">+</td>
<td class="org-left">previous character or group, repeated 1 or more time</td>
</tr>

<tr>
<td class="org-left">?</td>
<td class="org-left">previous character or group, repeated 0 or 1 time</td>
</tr>

<tr>
<td class="org-left">^</td>
<td class="org-left">start of line</td>
</tr>

<tr>
<td class="org-left">$</td>
<td class="org-left">end of line</td>
</tr>

<tr>
<td class="org-left">[…]</td>
<td class="org-left">any character between brackets</td>
</tr>

<tr>
<td class="org-left">[^..]</td>
<td class="org-left">any character not in the brackets</td>
</tr>

<tr>
<td class="org-left">[a-z]</td>
<td class="org-left">any character between a and z</td>
</tr>

<tr>
<td class="org-left">\</td>
<td class="org-left">prevents interpretation of following special char</td>
</tr>

<tr>
<td class="org-left">\</td>
<td class="org-left">or</td>
</tr>

<tr>
<td class="org-left">\w</td>
<td class="org-left">word constituent</td>
</tr>

<tr>
<td class="org-left">\b</td>
<td class="org-left">word boundary</td>
</tr>

<tr>
<td class="org-left">\sc</td>
<td class="org-left">character with c syntax (e.g. \s- for whitespace char)</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">start\end of group</td>
</tr>

<tr>
<td class="org-left">\&lt;</td>
<td class="org-left">\&gt; start\end of word</td>
</tr>

<tr>
<td class="org-left">\`</td>
<td class="org-left">\' start\end of buffer</td>
</tr>

<tr>
<td class="org-left">\1</td>
<td class="org-left">string matched by the first group</td>
</tr>

<tr>
<td class="org-left">\n</td>
<td class="org-left">string matched by the nth group</td>
</tr>

<tr>
<td class="org-left">\{3\}</td>
<td class="org-left">previous character or group, repeated 3 times</td>
</tr>

<tr>
<td class="org-left">\{3,\}</td>
<td class="org-left">previous character or group, repeated 3 or more times</td>
</tr>

<tr>
<td class="org-left">\{3,6\}</td>
<td class="org-left">previous character or group, repeated 3 to 6 times</td>
</tr>
</tbody>
</table>

<p>
<b>POSIX Character classes</b>
</p>



<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">[:digit:]</td>
<td class="org-left">digit, same as [0-9]</td>
</tr>

<tr>
<td class="org-left">[:upper:]</td>
<td class="org-left">letter in uppercase</td>
</tr>

<tr>
<td class="org-left">[:space:]</td>
<td class="org-left">whitespace character, as defined by the syntax table</td>
</tr>

<tr>
<td class="org-left">[:xdigit:]</td>
<td class="org-left">hexadecimal digit</td>
</tr>

<tr>
<td class="org-left">[:cntrl:]</td>
<td class="org-left">control character</td>
</tr>

<tr>
<td class="org-left">[:ascii:]</td>
<td class="org-left">ascii character</td>
</tr>
</tbody>
</table>

<p>
<b>Syntax Classes</b>
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">\s-</td>
<td class="org-left">whitespace character</td>
<td class="org-left">\s/</td>
<td class="org-left">character quote character</td>
</tr>

<tr>
<td class="org-left">\sw</td>
<td class="org-left">word constituent</td>
<td class="org-left">\s$</td>
<td class="org-left">paired delimiter</td>
</tr>

<tr>
<td class="org-left">\s_</td>
<td class="org-left">symbol constituent</td>
<td class="org-left">\s'</td>
<td class="org-left">expression prefix</td>
</tr>

<tr>
<td class="org-left">\s.</td>
<td class="org-left">punctuation character</td>
<td class="org-left">\s&lt;</td>
<td class="org-left">comment starter</td>
</tr>

<tr>
<td class="org-left">\s(</td>
<td class="org-left">open delimiter character</td>
<td class="org-left">\s&gt;</td>
<td class="org-left">comment starter</td>
</tr>

<tr>
<td class="org-left">\s)</td>
<td class="org-left">close delimiter character</td>
<td class="org-left">\s!</td>
<td class="org-left">generic comment delimiter</td>
</tr>

<tr>
<td class="org-left">\s"</td>
<td class="org-left">string quote character</td>
<td class="org-left">\s</td>
<td class="org-left">generic string delimiter</td>
</tr>

<tr>
<td class="org-left">\s\</td>
<td class="org-left">escape character</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
<b>Emacs X Perl Regex</b>
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Emacs Regex</th>
<th scope="col" class="org-left">Perl Regex</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">( )</td>
<td class="org-left">Capture group</td>
</tr>

<tr>
<td class="org-left">\{ \}</td>
<td class="org-left">{ }</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">\s-</td>
<td class="org-left">\s</td>
<td class="org-left">White space</td>
</tr>

<tr>
<td class="org-left">\1, \2, \3, \4</td>
<td class="org-left">$1, $2, $3</td>
<td class="org-left">Result of capture: search, replace.</td>
</tr>

<tr>
<td class="org-left">[ ]</td>
<td class="org-left">[ ]</td>
<td class="org-left">Character class</td>
</tr>

<tr>
<td class="org-left">[0-9] or [:digit:]</td>
<td class="org-left">\d</td>
<td class="org-left">Digit from 0 to 9</td>
</tr>

<tr>
<td class="org-left">\b</td>
<td class="org-left">\b</td>
<td class="org-left">Word boundary</td>
</tr>

<tr>
<td class="org-left">\w</td>
<td class="org-left">\w</td>
<td class="org-left">Word character</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org8e5a72b" class="outline-3">
<h3 id="org8e5a72b"><span class="section-number-3">4.2</span> Regex Commands</h3>
<div class="outline-text-3" id="text-4-2">
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">C-M-s</td>
<td class="org-left">incremental forward search matching regexp</td>
</tr>

<tr>
<td class="org-left">C-M-r</td>
<td class="org-left">incremental backward search matching regexp</td>
</tr>
</tbody>
</table>

<p>
<b>Buffer Commands</b>
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">M-x replace-regexp</td>
<td class="org-left">replace string matching regexp</td>
</tr>

<tr>
<td class="org-left">M-x query-replace-regexp</td>
<td class="org-left">same, but query before each replacement</td>
</tr>

<tr>
<td class="org-left">M-x align-regexp</td>
<td class="org-left">align, using strings matching regexp as delimiters</td>
</tr>

<tr>
<td class="org-left">M-x highlight-regexp</td>
<td class="org-left">highlight strings matching regexp</td>
</tr>

<tr>
<td class="org-left">M-x grep</td>
<td class="org-left">call unix grep command and put result in a buffer</td>
</tr>

<tr>
<td class="org-left">M-x lgrep</td>
<td class="org-left">user-friendly interface to the grep command</td>
</tr>

<tr>
<td class="org-left">M-x rgrep</td>
<td class="org-left">recursive grep</td>
</tr>

<tr>
<td class="org-left">M-x dired-do-copy-regexp</td>
<td class="org-left">copy files with names matching regexp</td>
</tr>

<tr>
<td class="org-left">M-x dired-do-rename-regexp</td>
<td class="org-left">rename files matching regexp</td>
</tr>

<tr>
<td class="org-left">M-x find-grep-dired</td>
<td class="org-left">display files containing matches for regexp with Dired</td>
</tr>
</tbody>
</table>

<p>
<b>Line Commands</b>
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Command (M-x command)</th>
<th scope="col" class="org-left">Alias</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">keep-lines</td>
<td class="org-left">delete-non-matching-lines</td>
<td class="org-left">Delete all lines except those containing matches</td>
</tr>

<tr>
<td class="org-left">flush-lines</td>
<td class="org-left">delete-matching-lines</td>
<td class="org-left">Delete lines containing matches</td>
</tr>

<tr>
<td class="org-left">highlight-lines-matching-regexp</td>
<td class="org-left">hi-lock-line-face-buffer</td>
<td class="org-left">Highlight lines matching regexp</td>
</tr>

<tr>
<td class="org-left">occur</td>
<td class="org-left">list-matching-lines</td>
<td class="org-left">Show lines containing a match</td>
</tr>

<tr>
<td class="org-left">multi-occur</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Show lines in all buffers containing a match</td>
</tr>

<tr>
<td class="org-left">how-many</td>
<td class="org-left">count-matches</td>
<td class="org-left">Count the number of strings matching regexp</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org16eac3b" class="outline-3">
<h3 id="org16eac3b"><span class="section-number-3">4.3</span> Regex Functions</h3>
<div class="outline-text-3" id="text-4-3">
</div>
<div id="outline-container-orga39600c" class="outline-4">
<h4 id="orga39600c"><span class="section-number-4">4.3.1</span> match-string</h4>
</div>
<div id="outline-container-orgc8e111b" class="outline-4">
<h4 id="orgc8e111b"><span class="section-number-4">4.3.2</span> match-end</h4>
</div>
<div id="outline-container-orgc43f2b0" class="outline-4">
<h4 id="orgc43f2b0"><span class="section-number-4">4.3.3</span> match-beginning</h4>
</div>
<div id="outline-container-org0240f2b" class="outline-4">
<h4 id="org0240f2b"><span class="section-number-4">4.3.4</span> re-search</h4>
</div>
<div id="outline-container-orgbab5f52" class="outline-4">
<h4 id="orgbab5f52"><span class="section-number-4">4.3.5</span> re-search-forward</h4>
</div>
<div id="outline-container-orgbd9d357" class="outline-4">
<h4 id="orgbd9d357"><span class="section-number-4">4.3.6</span> replace-string-in-regexp</h4>
</div>
<div id="outline-container-org99b06c9" class="outline-4">
<h4 id="org99b06c9"><span class="section-number-4">4.3.7</span> replace-string</h4>
</div>
</div>
<div id="outline-container-org4d376bc" class="outline-3">
<h3 id="org4d376bc"><span class="section-number-3">4.4</span> Build regex interactively</h3>
<div class="outline-text-3" id="text-4-4">
<p>
M-x re-builder
</p>

<p>
M-x query-replace-regexp
</p>
</div>
</div>
<div id="outline-container-org93dca40" class="outline-3">
<h3 id="org93dca40"><span class="section-number-3">4.5</span> Emacs Regex rx-notation</h3>
<div class="outline-text-3" id="text-4-5">
<div class="col-auto">
<pre><code class="emacs-lisp">(<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">rx</span>)

<span style="color: #b22222;">;;  </span><span style="color: #b22222;">(rx &lt;patterns&gt;)</span>

ELISP&gt; (<span style="color: #a020f0;">rx</span> digit)
<span style="color: #8b2252;">"[[:digit:]]"</span>

ELISP&gt; (rx-to-string '(<span style="color: #a020f0;">or</span> <span style="color: #8b2252;">"foo"</span> <span style="color: #8b2252;">"bar"</span>))
<span style="color: #8b2252;">"</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">(?:</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">(?:</span><span style="color: #8b2252;">bar</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">foo</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">)</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">)</span><span style="color: #8b2252;">"</span>
</code></pre>
</div>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">rx notation</th>
<th scope="col" class="org-left">Emacs regex</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Beginning of Line</td>
<td class="org-left">bol</td>
<td class="org-left">^</td>
</tr>

<tr>
<td class="org-left">End of Line</td>
<td class="org-left">eol</td>
<td class="org-left">$</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Begining of String</td>
<td class="org-left">bos</td>
<td class="org-left">\\`</td>
</tr>

<tr>
<td class="org-left">End of String</td>
<td class="org-left">eos</td>
<td class="org-left"><code>\\'</code></td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Beginning of Word</td>
<td class="org-left">bow</td>
<td class="org-left">\\&lt;</td>
</tr>

<tr>
<td class="org-left">End of Word</td>
<td class="org-left">eow</td>
<td class="org-left">\\&gt;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Digit 0 to 9</td>
<td class="org-left">digit</td>
<td class="org-left">\lbr\lbr:digit:\rbr\rbr</td>
</tr>

<tr>
<td class="org-left">Hexadecimal digit</td>
<td class="org-left">hex</td>
<td class="org-left">\lbr\lbr:xdigit:\rbr\rbr</td>
</tr>

<tr>
<td class="org-left">Match ascii character</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Match anything lower case</td>
<td class="org-left">lower</td>
<td class="org-left">\lbr\lbr:lower:\rbr\rbr</td>
</tr>

<tr>
<td class="org-left">Match anything upper case</td>
<td class="org-left">upper</td>
<td class="org-left">\lbr\lbr:upper:\rbr\rbr</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">word</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">\sw</td>
</tr>
</tbody>
</table>

<p>
<i>example</i>
</p>


<div class="col-auto">
<pre><code class="emacs-lisp">ELISP&gt; (<span style="color: #a020f0;">require</span> '<span style="color: #008b8b;">rx</span>)
rx

ELISP&gt; (<span style="color: #a020f0;">rx</span> (+ digit))
<span style="color: #8b2252;">"[[:digit:]]+"</span>

ELISP&gt; (<span style="color: #a020f0;">rx</span> digit (+ digit))
<span style="color: #8b2252;">"[[:digit:]][[:digit:]]+"</span>

ELISP&gt; (<span style="color: #a020f0;">rx</span> bol (+ digit) eol)
<span style="color: #8b2252;">"^[[:digit:]]+$"</span>

ELISP&gt; (<span style="color: #a020f0;">rx</span> (zero-or-more digit))
<span style="color: #8b2252;">"[[:digit:]]*"</span>

ELISP&gt; (<span style="color: #a020f0;">rx</span> (one-or-more digit))
<span style="color: #8b2252;">"[[:digit:]]+"</span>

ELISP&gt; (<span style="color: #a020f0;">rx</span> (<span style="color: #a020f0;">or</span> <span style="color: #8b2252;">"cat"</span> <span style="color: #8b2252;">"rat"</span> <span style="color: #8b2252;">"dog"</span>))
<span style="color: #8b2252;">"</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">(?:</span><span style="color: #8b2252;">cat</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">dog</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">rat</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">)</span><span style="color: #8b2252;">"</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">(replace-regexp-in-string REGEXP REP STRING</span>
<span style="color: #b22222;">;;      </span><span style="color: #b22222;">&amp;optional FIXEDCASE LITERAL SUBEXP START)</span>

ELISP&gt; (replace-regexp-in-string
          (<span style="color: #a020f0;">rx</span> (<span style="color: #a020f0;">or</span> <span style="color: #8b2252;">"cat"</span> <span style="color: #8b2252;">"rat"</span> <span style="color: #8b2252;">"dog"</span>))
          <span style="color: #8b2252;">""</span>
          <span style="color: #8b2252;">"cat cata rat rat dograt dog cat2334 23rat2"</span>)
<span style="color: #8b2252;">" a     2334 232"</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Replaces only in the beggining of line</span>
<span style="color: #b22222;">;;</span>
ELISP&gt;  (replace-regexp-in-string
          (<span style="color: #a020f0;">rx</span> bol (<span style="color: #a020f0;">or</span> <span style="color: #8b2252;">"cat"</span> <span style="color: #8b2252;">"rat"</span> <span style="color: #8b2252;">"dog"</span>))
          <span style="color: #8b2252;">""</span>
          <span style="color: #8b2252;">"cat cata rat rat dograt dog cat2334 23rat2"</span>)
<span style="color: #8b2252;">" cata rat rat dograt dog cat2334 23rat2"</span>


ELISP&gt;  (replace-regexp-in-string
          (<span style="color: #a020f0;">rx</span> bow (<span style="color: #a020f0;">or</span> <span style="color: #8b2252;">"cat"</span> <span style="color: #8b2252;">"rat"</span> <span style="color: #8b2252;">"dog"</span>) eow)
          <span style="color: #8b2252;">""</span>
          <span style="color: #8b2252;">"cat cata rat rat dograt dog cat2334 23rat2"</span>)
<span style="color: #8b2252;">" cata   dograt  cat2334 23rat2"</span>

ELISP&gt;  (<span style="color: #a020f0;">rx</span> bow (<span style="color: #a020f0;">or</span> <span style="color: #8b2252;">"cat"</span> <span style="color: #8b2252;">"rat"</span> <span style="color: #8b2252;">"dog"</span>) eow)
<span style="color: #8b2252;">"\\&lt;</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">(?:</span><span style="color: #8b2252;">cat</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">dog</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">rat</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">)</span><span style="color: #8b2252;">\\&gt;"</span>

<span style="color: #b22222;">;;  </span><span style="color: #b22222;">Removes all whitespaces</span>
<span style="color: #b22222;">;;</span>
ELISP&gt;  (replace-regexp-in-string
          (<span style="color: #a020f0;">rx</span> (* whitespace))
          <span style="color: #8b2252;">""</span>
          <span style="color: #8b2252;">"cat cata rat rat dograt dog cat2334 23rat2"</span>)

<span style="color: #8b2252;">"catcataratratdogratdogcat233423rat"</span>

ELISP&gt;  (replace-regexp-in-string
          (<span style="color: #a020f0;">rx</span> (* whitespace))
          <span style="color: #8b2252;">""</span>
          <span style="color: #8b2252;">"cat cata rat rat dograt dog cat2334 23rat2"</span>)

<span style="color: #8b2252;">"catcataratratdogratdogcat233423rat"</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Capture group</span>
<span style="color: #b22222;">;;</span>
ELISP&gt;  (replace-regexp-in-string
          (<span style="color: #a020f0;">rx</span> (submatch bow (<span style="color: #a020f0;">or</span> <span style="color: #8b2252;">"cat"</span> <span style="color: #8b2252;">"rat"</span> <span style="color: #8b2252;">"dog"</span>) eow))
          <span style="color: #8b2252;">"(\\1)"</span>
          <span style="color: #8b2252;">"cat cata rat rat dograt dog cat2334 23rat2"</span>)

<span style="color: #8b2252;">"(cat) cata (rat) (rat) dograt (dog) cat2334 23rat2"</span>

ELISP&gt; (<span style="color: #a020f0;">rx</span> (submatch bow (<span style="color: #a020f0;">or</span> <span style="color: #8b2252;">"cat"</span> <span style="color: #8b2252;">"rat"</span> <span style="color: #8b2252;">"dog"</span>) eow))
<span style="color: #8b2252;">"</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">(</span><span style="color: #8b2252;">\\&lt;</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">(?:</span><span style="color: #8b2252;">cat</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">dog</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">|</span><span style="color: #8b2252;">rat</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">)</span><span style="color: #8b2252;">\\&gt;</span><span style="color: #8b2252; font-weight: bold;">\\</span><span style="color: #8b2252; font-weight: bold;">)</span><span style="color: #8b2252;">"</span>
</code></pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd283a93" class="outline-2">
<h2 id="orgd283a93"><span class="section-number-2">5</span> Color Scheme</h2>
<div class="outline-text-2" id="text-5">
<p>
<a href="http://caiorss.github.io/Emacs-Elisp-Programming/Elisp_Programming.html#sec-5">http://caiorss.github.io/Emacs-Elisp-Programming/Elisp_Programming.html#sec-5</a>
</p>
</div>
</div>
<div id="outline-container-orgcc79084" class="outline-2">
<h2 id="orgcc79084"><span class="section-number-2">6</span> Key Bindings</h2>
<div class="outline-text-2" id="text-6">
<p>
<a href="http://caiorss.github.io/Emacs-Elisp-Programming/Elisp_Programming.html#sec-6">http://caiorss.github.io/Emacs-Elisp-Programming/Elisp_Programming.html#sec-6</a>
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<div id="disqus_thread"></div>
<script>
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://geekinney-blog.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

<p class="author">Author: Kinney Zhang (<a href="mailto:kinneyzhang666@gmail.com">kinneyzhang666@gmail.com</a>)</p>
<p class="date">Date: 2019-11-12</p>
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 26.3 (<a href="https://orgmode.org">Org</a> mode 9.1.9)</p>
</div>
</body>
</html>
