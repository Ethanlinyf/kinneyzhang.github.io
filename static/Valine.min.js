!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Valine=t():e.Valine=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=17)}([function(e,t,n){var r,i,o;!function(n,a){i=[e,t],r=a,void 0!==(o="function"==typeof r?r.apply(t,i):r)&&(e.exports=o)}(0,function(e,t){"use strict";function n(e){function t(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function n(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}function r(){if(0!==e.scrollHeight){var t=n(e),r=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+s+"px",l=e.clientWidth,t.forEach(function(e){e.node.scrollTop=e.scrollTop}),r&&(document.documentElement.scrollTop=r)}}function i(){r();var n=Math.round(parseFloat(e.style.height)),i=window.getComputedStyle(e,null),o="content-box"===i.boxSizing?Math.round(parseFloat(i.height)):e.offsetHeight;if(o<n?"hidden"===i.overflowY&&(t("scroll"),r(),o="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==i.overflowY&&(t("hidden"),r(),o="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),c!==o){c=o;var s=a("autosize:resized");try{e.dispatchEvent(s)}catch(e){}}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!o.has(e)){var s=null,l=null,c=null,d=function(){e.clientWidth!==l&&i()},u=function(t){window.removeEventListener("resize",d,!1),e.removeEventListener("input",i,!1),e.removeEventListener("keyup",i,!1),e.removeEventListener("autosize:destroy",u,!1),e.removeEventListener("autosize:update",i,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),o.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",u,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",i,!1),window.addEventListener("resize",d,!1),e.addEventListener("input",i,!1),e.addEventListener("autosize:update",i,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",o.set(e,{destroy:u,update:i}),function(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),s="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(s)&&(s=0),i()}()}}function r(e){var t=o.get(e);t&&t.destroy()}function i(e){var t=o.get(e);t&&t.update()}var o="function"==typeof Map?new Map:function(){var e=[],t=[];return{has:function(t){return e.indexOf(t)>-1},get:function(n){return t[e.indexOf(n)]},set:function(n,r){-1===e.indexOf(n)&&(e.push(n),t.push(r))},delete:function(n){var r=e.indexOf(n);r>-1&&(e.splice(r,1),t.splice(r,1))}}}(),a=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){a=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var s=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(s=function(e){return e},s.destroy=function(e){return e},s.update=function(e){return e}):(s=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e)}),e},s.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],r),e},s.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e}),t.default=s,e.exports=t.default})},function(e,t,n){"use strict";function r(e){var t=this;return t.init(e),t}function i(e){return new r(e)}var o=n(9).version,a=n(6),s=n(8),l=n(0),c=n(5),d=n(3),u=n(4),p=n(2),f=n(7),h=/^https?\:\/\//,v={comment:"",nick:"Anonymous",mail:"",link:"",ua:navigator.userAgent,url:""},g={"zh-cn":{head:{nick:"昵称",mail:"邮箱",link:"网址(http://)"},tips:{comments:"评论",sofa:"快来做第一个评论的人吧~",busy:"还在提交中，请稍候...",again:"这么简单也能错，也是没谁了."},ctrl:{reply:"回复",ok:"好的",sure:"确认",cancel:"取消",confirm:"确认",continue:"继续",more:"查看更多...",try:"再试试?",preview:"预览",emoji:"表情"},error:{99:"初始化失败，请检查init中的`el`元素.",100:"初始化失败，请检查你的AppId和AppKey.",401:"未经授权的操作，请检查你的AppId和AppKey.",403:"访问被api域名白名单拒绝，请检查你的安全域名设置."},timeago:{seconds:"秒前",minutes:"分钟前",hours:"小时前",days:"天前",now:"刚刚"}},en:{head:{nick:"NickName",mail:"E-Mail",link:"Website(http://)"},tips:{comments:"Comments",sofa:"No comments yet.",busy:"Submit is busy, please wait...",again:"Sorry, this is a wrong calculation."},ctrl:{reply:"Reply",ok:"Ok",sure:"Sure",cancel:"Cancel",confirm:"Confirm",continue:"Continue",more:"Load More...",try:"Once More?",preview:"Preview",emoji:"Emoji"},error:{99:"Initialization failed, Please check the `el` element in the init method.",100:"Initialization failed, Please check your appId and appKey.",401:"Unauthorized operation, Please check your appId and appKey.",403:"Access denied by api domain white list, Please check your security domain."},timeago:{seconds:"seconds ago",minutes:"minutes ago",hours:"hours ago",days:"days ago",now:"just now"}}},m={cdn:"https://gravatar.loli.net/avatar/",ds:["mp","identicon","monsterid","wavatar","robohash","retro",""],params:"",hide:!1},b=["nick","mail","link"],x=Storage&&localStorage&&localStorage instanceof Storage&&localStorage,y=location.pathname.replace(/index\.html?$/,"");r.prototype.init=function(e){var t=this;if(t.config=e,"undefined"==typeof document)return void console;"undefined"==typeof AV?u.dynamicLoadSource("script",{src:"//cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"},function(){if("undefined"==typeof AV)return void setTimeout(function(){t.init(e)},300);!!e&&t._init()}):!!e&&t._init();return u.dynamicLoadSource("script",{src:"//js.fundebug.cn/fundebug.1.9.0.min.js",apikey:"2c7e5b30c7cf402cb7fb35d14b62e7f778babbb70d054160af750065a180fdcd",async:!0}),t},r.prototype._init=function(){var e=this;try{var t=e.config,n=t.lang,r=t.langMode,i=t.avatar,a=t.avatarForce,l=t.avatar_cdn,c=t.notify,d=t.verify,p=t.visitor,x=t.pageSize,w=t.recordIP,_=t.clazzName,A=void 0===_?"Comment":_;e.config.clazzName=A;var O=m.ds,S=a?"&q="+Math.random().toString(32).substring(2):"";n&&r&&e.installLocale(n,r),e.locale=e.locale||g[n||"zh-cn"],e.notify=c||!1,e.verify=d||!1,m.params="?d="+(O.indexOf(i)>-1?i:"mp")+"&v="+o+S,m.hide="hide"===i,m.cdn=h.test(l)?l:m.cdn,y=e.config.path||y;var $=Number(x||10);if(e.config.pageSize=isNaN($)?10:$<1?10:$,s.setOptions({renderer:new s.Renderer,highlight:!1===e.config.highlight?null:f,gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!0}),w){var E=u.create("script","src","//api.ip.sb/jsonip?callback=getIP"),L=document.getElementsByTagName("script")[0];L.parentNode.insertBefore(E,L),window.getIP=function(e){v.ip=e.ip}}var M=e.config.app_id||e.config.appId,C=e.config.app_key||e.config.appKey;if(!M||!C)throw 99;var z="https://",T="";if(!e.config.serverURLs)switch(M.slice(-9)){case"-9Nh9j0Va":z+="tab.";break;case"-MdYXbMMI":z+="us."}T=e.config.serverURLs||z+"avoscloud.com",M!==AV._config.applicationId&&C!==AV._config.applicationKey&&AV.init({appId:M,appKey:C,serverURLs:T});var R=u.findAll(document,".valine-comment-count");u.each(R,function(t,n){if(n){var r=u.attr(n,"data-xid");r&&e.Q(r).count().then(function(e){n.innerText=e}).catch(function(e){n.innerText=0})}}),p&&k.add(AV.Object.extend("Counter"));var j=e.config.el||null,B=u.findAll(document,j);if(!(j=j instanceof HTMLElement?j:B[B.length-1]||null))return;e.el=j,e.el.classList.add("v"),m.hide&&e.el.classList.add("hide-avatar"),e.config.meta=(e.config.guest_info||e.config.meta||b).filter(function(e){return b.indexOf(e)>-1});var P=(0==e.config.meta.length?b:e.config.meta).map(function(t){var n="mail"==t?"email":"text";return b.indexOf(t)>-1?'<input name="'+t+'" placeholder="'+e.locale.head[t]+'" class="v'+t+' vinput" type="'+n+'">':""});e.placeholder=e.config.placeholder||"Just Go Go",e.el.innerHTML='<div class="vwrap"><div class="vheader item'+P.length+'">'+P.join("")+'</div>
